/*
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
(function(){function c(p){p=String(p);return p.charAt(0).toUpperCase()+p.slice(1)}function g(p,D){var F=-1,m=p?p.length:0;if("number"==typeof m&&-1<m&&m<=B)for(;++F<m;)D(p[F],F,p);else k(p,D)}function d(p){p=String(p).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(p)?p:c(p)}function k(p,D){for(var F in p)E.call(p,F)&&D(p[F],F,p)}function f(p){return null==p?c(p):u.call(p).slice(8,-1)}function a(p,D){var F=null!=p?typeof p[D]:"number";return!/^(?:boolean|number|string|undefined)$/.test(F)&&
("object"==F?!!p[D]:!0)}function e(p){return String(p).replace(/([ -])(?!$)/g,"$1?")}function h(p,D){var F=null;g(p,function(m,x){F=D(F,m,x,p)});return F}function b(p){function D(M){return h(M,function(L,J){var P=J.pattern||e(J);!L&&(L=RegExp("\\b"+P+" *\\d+[.\\w_]*","i").exec(p)||RegExp("\\b"+P+" *\\w+-[\\w]*","i").exec(p)||RegExp("\\b"+P+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(p))&&((L=String(J.label&&!RegExp(P,"i").test(J.label)?J.label:L).split("/"))[1]&&!/[\d.]+/.test(L[0])&&(L[0]+=
" "+L[1]),J=J.label||J,L=d(L[0].replace(RegExp(P,"i"),J).replace(RegExp("; *(?:"+J+"[_-])?","i")," ").replace(RegExp("("+J+")[-_.]?(\\w)","i"),"$1 $2")));return L})}function F(M){return h(M,function(L,J){return L||(RegExp(J+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(p)||0)[1]||null})}var m=l,x=p&&"object"==typeof p&&"String"!=f(p);x&&(m=p,p=null);var w=m.navigator||{},q=w.userAgent||"";p||(p=q);var G=x?!!w.likeChrome:/\bChrome\b/.test(p)&&!/internal|\n/i.test(u.toString()),
K=x?"Object":"ScriptBridgingProxyObject",N=x?"Object":"Environment",O=x&&m.java?"JavaPackage":f(m.java),U=x?"Object":"RuntimeObject";N=(O=/\bJava/.test(O)&&m.java)&&f(m.environment)==N;var V=O?"a":"\u03b1",W=O?"b":"\u03b2",aa=m.document||{},S=m.operamini||m.opera,X=r.test(X=x&&S?S["[[Class]]"]:f(S))?X:S=null,n,Y=p;x=[];var Z=null,T=p==q;q=T&&S&&"function"==typeof S.version&&S.version();var H=function(M){return h(M,function(L,J){return L||RegExp("\\b"+(J.pattern||e(J))+"\\b","i").exec(p)&&(J.label||
J)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),A=function(M){return h(M,function(L,J){return L||RegExp("\\b"+(J.pattern||e(J))+"\\b","i").exec(p)&&(J.label||J)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),I=D([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Q=function(M){return h(M,function(L,J,P){return L||(J[I]||J[/^[a-z]+(?: +[a-z]+\b)*/i.exec(I)]||RegExp("\\b"+e(P)+"(?:\\b|\\w*\\d)","i").exec(p))&&P})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),C=function(M){return h(M,function(L,J){var P=J.pattern||e(J);if(!L&&(L=RegExp("\\b"+P+"(?:/[\\d.]+|[ \\w.]*)","i").exec(p))){var R=L,ba=J.label||J,ca={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};P&&ba&&/^Win/i.test(R)&&!/^Windows Phone /i.test(R)&&(ca=ca[/[\d.]+$/.exec(R)])&&(R="Windows "+ca);R=String(R);P&&ba&&(R=R.replace(RegExp(P,"i"),ba));L=R=d(R.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,
"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return L})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X",
"Macintosh","Mac","Windows 98;","Windows "]);H&&(H=[H]);Q&&!I&&(I=D([Q]));if(n=/\bGoogle TV\b/.exec(I))I=n[0];/\bSimulator\b/i.test(p)&&(I=(I?I+" ":"")+"Simulator");"Opera Mini"==A&&/\bOPiOS\b/.test(p)&&x.push("running in Turbo/Uncompressed mode");"IE"==A&&/\blike iPhone OS\b/.test(p)?(n=b(p.replace(/like iPhone OS/,"")),Q=n.manufacturer,I=n.product):/^iP/.test(I)?(A||(A="Safari"),C="iOS"+((n=/ OS ([\d_]+)/i.exec(p))?" "+n[1].replace(/_/g,"."):"")):"Konqueror"!=A||/buntu/i.test(C)?Q&&"Google"!=Q&&
(/Chrome/.test(A)&&!/\bMobile Safari\b/i.test(p)||/\bVita\b/.test(I))||/\bAndroid\b/.test(C)&&/^Chrome/.test(A)&&/\bVersion\//i.test(p)?(A="Android Browser",C=/\bAndroid\b/.test(C)?C:"Android"):"Silk"==A?(/\bMobi/i.test(p)||(C="Android",x.unshift("desktop mode")),/Accelerated *= *true/i.test(p)&&x.unshift("accelerated")):"PaleMoon"==A&&(n=/\bFirefox\/([\d.]+)\b/.exec(p))?x.push("identifying as Firefox "+n[1]):"Firefox"==A&&(n=/\b(Mobile|Tablet|TV)\b/i.exec(p))?(C||(C="Firefox OS"),I||(I=n[1])):!A||
(n=!/\bMinefield\b/i.test(p)&&/\b(?:Firefox|Safari)\b/.exec(A))?(A&&!I&&/[\/,]|^[^(]+?\)/.test(p.slice(p.indexOf(n+"/")+8))&&(A=null),(n=I||Q||C)&&(I||Q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(C))&&(A=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(C)?C:n)+" Browser")):"Electron"==A&&(n=(/\bChrome\/([\d.]+)\b/.exec(p)||0)[1])&&x.push("Chromium "+n):C="Kubuntu";q||(q=F(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",e(A),
"(?:Firefox|Minefield|NetFront)"]));if(n="iCab"==H&&3<parseFloat(q)&&"WebKit"||/\bOpera\b/.test(A)&&(/\bOPR\b/.test(p)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(p)&&!/^(?:Trident|EdgeHTML)$/.test(H)&&"WebKit"||!H&&/\bMSIE\b/i.test(p)&&("Mac OS"==C?"Tasman":"Trident")||"WebKit"==H&&/\bPlayStation\b(?! Vita\b)/i.test(A)&&"NetFront")H=[n];"IE"==A&&(n=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(p)||0)[1])?(A+=" Mobile",C="Windows Phone "+(/\+$/.test(n)?n:n+".x"),x.unshift("desktop mode")):/\bWPDesktop\b/i.test(p)?
(A="IE Mobile",C="Windows Phone 8.x",x.unshift("desktop mode"),q||(q=(/\brv:([\d.]+)/.exec(p)||0)[1])):"IE"!=A&&"Trident"==H&&(n=/\brv:([\d.]+)/.exec(p))&&(A&&x.push("identifying as "+A+(q?" "+q:"")),A="IE",q=n[1]);if(T){if(a(m,"global"))if(O&&(n=O.lang.System,Y=n.getProperty("os.arch"),C=C||n.getProperty("os.name")+" "+n.getProperty("os.version")),N){try{q=m.require("ringo/engine").version.join("."),A="RingoJS"}catch(M){(n=m.system)&&n.global.system==m.system&&(A="Narwhal",C||(C=n[0].os||null))}A||
(A="Rhino")}else"object"==typeof m.process&&!m.process.browser&&(n=m.process)&&("object"==typeof n.versions&&("string"==typeof n.versions.electron?(x.push("Node "+n.versions.node),A="Electron",q=n.versions.electron):"string"==typeof n.versions.nw&&(x.push("Chromium "+q,"Node "+n.versions.node),A="NW.js",q=n.versions.nw)),A||(A="Node.js",Y=n.arch,C=n.platform,q=(q=/[\d.]+/.exec(n.version))?q[0]:null));else f(n=m.runtime)==K?(A="Adobe AIR",C=n.flash.system.Capabilities.os):f(n=m.phantom)==U?(A="PhantomJS",
q=(n=n.version||null)&&n.major+"."+n.minor+"."+n.patch):"number"==typeof aa.documentMode&&(n=/\bTrident\/(\d+)/i.exec(p))?(q=[q,aa.documentMode],(n=+n[1]+4)!=q[1]&&(x.push("IE "+q[1]+" mode"),H&&(H[1]=""),q[1]=n),q="IE"==A?String(q[1].toFixed(1)):q[0]):"number"==typeof aa.documentMode&&/^(?:Chrome|Firefox)\b/.test(A)&&(x.push("masking as "+A+" "+q),A="IE",q="11.0",H=["Trident"],C="Windows");C=C&&d(C)}q&&(n=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(q)||/(?:alpha|beta)(?: ?\d)?/i.exec(p+";"+(T&&
w.appMinorVersion))||/\bMinefield\b/i.test(p)&&"a")&&(Z=/b/i.test(n)?"beta":"alpha",q=q.replace(RegExp(n+"\\+?$"),"")+("beta"==Z?W:V)+(/\d+\+?/.exec(n)||""));if("Fennec"==A||"Firefox"==A&&/\b(?:Android|Firefox OS)\b/.test(C))A="Firefox Mobile";else if("Maxthon"==A&&q)q=q.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(I))"Xbox 360"==I&&(C=null),"Xbox 360"==I&&/\bIEMobile\b/.test(p)&&x.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(A)&&(!A||I||/Browser|Mobi/.test(A))||"Windows CE"!=
C&&!/Mobi/i.test(p))if("IE"==A&&T)try{null===m.external&&x.unshift("platform preview")}catch(M){x.unshift("embedded")}else(/\bBlackBerry\b/.test(I)||/\bBB10\b/.test(p))&&(n=(RegExp(I.replace(/ +/g," *")+"/([.\\d]+)","i").exec(p)||0)[1]||q)?(n=[n,/BB10/.test(p)],C=(n[1]?(I=null,Q="BlackBerry"):"Device Software")+" "+n[0],q=null):this!=k&&"Wii"!=I&&(T&&S||/Opera/.test(A)&&/\b(?:MSIE|Firefox)\b/i.test(p)||"Firefox"==A&&/\bOS X (?:\d+\.){2,}/.test(C)||"IE"==A&&(C&&!/^Win/.test(C)&&5.5<q||/\bWindows XP\b/.test(C)&&
8<q||8==q&&!/\bTrident\b/.test(p)))&&!r.test(n=b.call(k,p.replace(r,"")+";"))&&n.name&&(n="ing as "+n.name+((n=n.version)?" "+n:""),r.test(A)?(/\bIE\b/.test(n)&&"Mac OS"==C&&(C=null),n="identify"+n):(n="mask"+n,A=X?d(X.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(n)&&(C=null),T||(q=null)),H=["Presto"],x.push(n));else A+=" Mobile";if(n=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(p)||0)[1]){n=[parseFloat(n.replace(/\.(\d)$/,".0$1")),n];if("Safari"==A&&"+"==n[1].slice(-1))A="WebKit Nightly",Z="alpha",
q=n[1].slice(0,-1);else if(q==n[1]||q==(n[2]=(/\bSafari\/([\d.]+\+?)/i.exec(p)||0)[1]))q=null;n[1]=(/\bChrome\/([\d.]+)/i.exec(p)||0)[1];537.36==n[0]&&537.36==n[2]&&28<=parseFloat(n[1])&&"WebKit"==H&&(H=["Blink"]);T&&(G||n[1])?(H&&(H[1]="like Chrome"),n=n[1]||(n=n[0],530>n?1:532>n?2:532.05>n?3:533>n?4:534.03>n?5:534.07>n?6:534.1>n?7:534.13>n?8:534.16>n?9:534.24>n?10:534.3>n?11:535.01>n?12:535.02>n?"13+":535.07>n?15:535.11>n?16:535.19>n?17:536.05>n?18:536.1>n?19:537.01>n?20:537.11>n?"21+":537.13>n?
23:537.18>n?24:537.24>n?25:537.36>n?26:"Blink"!=H?"27":"28")):(H&&(H[1]="like Safari"),n=(n=n[0],400>n?1:500>n?2:526>n?3:533>n?4:534>n?"4+":535>n?5:537>n?6:538>n?7:601>n?8:"8"));H&&(H[1]+=" "+(n+="number"==typeof n?".x":/[.+]/.test(n)?"":"+"));"Safari"==A&&(!q||45<parseInt(q))&&(q=n)}"Opera"==A&&(n=/\bzbov|zvav$/.exec(C))?(A+=" ",x.unshift("desktop mode"),"zvav"==n?(A+="Mini",q=null):A+="Mobile",C=C.replace(RegExp(" *"+n+"$"),"")):"Safari"==A&&/\bChrome\b/.exec(H&&H[1])&&(x.unshift("desktop mode"),
A="Chrome Mobile",q=null,/\bOS X\b/.test(C)?(Q="Apple",C="iOS 4.3+"):C=null);q&&0==q.indexOf(n=/[\d.]+$/.exec(C))&&-1<p.indexOf("/"+n+"-")&&(C=String(C.replace(n,"")).replace(/^ +| +$/g,""));H&&!/\b(?:Avant|Nook)\b/.test(A)&&(/Browser|Lunascape|Maxthon/.test(A)||"Safari"!=A&&/^iOS/.test(C)&&/\bSafari\b/.test(H[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(A)&&H[1])&&(n=H[H.length-1])&&x.push(n);x.length&&(x=["("+x.join("; ")+")"]);Q&&I&&0>I.indexOf(Q)&&
x.push("on "+Q);I&&x.push((/^on /.test(x[x.length-1])?"":"on ")+I);if(C){var da=(n=/ ([\d.+]+)$/.exec(C))&&"/"==C.charAt(C.length-n[0].length-1);C={architecture:32,family:n&&!da?C.replace(n[0],""):C,version:n?n[1]:null,toString:function(){var M=this.version;return this.family+(M&&!da?" "+M:"")+(64==this.architecture?" 64-bit":"")}}}(n=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Y))&&!/\bi686\b/i.test(Y)?(C&&(C.architecture=64,C.family=C.family.replace(RegExp(" *"+n),"")),A&&(/\bWOW64\b/i.test(p)||T&&
/\w(?:86|32)$/.test(w.cpuClass||w.platform)&&!/\bWin64; x64\b/i.test(p))&&x.unshift("32-bit")):C&&/^OS X/.test(C.family)&&"Chrome"==A&&39<=parseFloat(q)&&(C.architecture=64);p||(p=null);m={};m.description=p;m.layout=H&&H[0];m.manufacturer=Q;m.name=A;m.prerelease=Z;m.product=I;m.ua=p;m.version=A&&q;m.os=C||{architecture:null,family:null,version:null,toString:function(){return"null"}};m.parse=b;m.toString=function(){return this.description||""};m.version&&x.unshift(q);m.name&&x.unshift(A);C&&A&&(C!=
String(C).split(" ")[0]||C!=A.split(" ")[0]&&!I)&&x.push(I?"("+C+")":"on "+C);x.length&&(m.description=x.join(" "));return m}var t={"function":!0,object:!0},l=t[typeof window]&&window||this,y=t[typeof exports]&&exports;t=t[typeof module]&&module&&!module.nodeType&&module;var v=y&&t&&"object"==typeof global&&global;!v||v.global!==v&&v.window!==v&&v.self!==v||(l=v);var B=Math.pow(2,53)-1,r=/\bOpera/;v=Object.prototype;var E=v.hasOwnProperty,u=v.toString,z=b();"function"==typeof define&&"object"==typeof define.amd&&
define.amd?(l.platform=z,define(function(){return z})):y&&t?k(z,function(p,D){y[D]=p}):l.platform=z}).call(this);
function buildIOSMeta(){for(var c=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],g=0;g<c.length;g++){var d=document.createElement("meta");d.name=c[g].name;d.content=c[g].content;var k=window.document.head.querySelector('meta[name="'+d.name+'"]');k&&k.parentNode.removeChild(k);window.document.head.appendChild(d)}}
function hideIOSFullscreenPanel(){document.querySelector(".xxx-ios-fullscreen-message").style.display="none";document.querySelector(".xxx-ios-fullscreen-scroll").style.display="none";document.querySelector(".xxx-game-iframe-full").classList.remove("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){document.body.insertAdjacentHTML("beforeend",'<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){document.querySelector(".xxx-ios-fullscreen-message").style.display="none";document.querySelector(".xxx-ios-fullscreen-scroll").style.display="none"}
function __iosResize(){window.scrollTo(0,0);console.log(window.devicePixelRatio);console.log(window.innerWidth);console.log(window.innerHeight);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&document.querySelector(".xxx-game-iframe-full").classList.add("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():
showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}
function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}function iosInIframe(){try{return window.self!==window.top}catch(c){return!0}}function isIOSLessThen13(){var c=platform.os,g=c.family.toLowerCase();c=parseFloat(c.version);return"ios"===g&&13>c?!0:!1}document.addEventListener("DOMContentLoaded",function(){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});
window.addEventListener("resize",function(c){platform&&"iPhone"===platform.product&&"safari"===platform.name.toLowerCase()&&isIOSLessThen13()&&!iosInIframe()&&iosResize()});var s_iOffsetX=0,s_iOffsetY=0,s_fInverseScaling=0,s_bIsIphone=!1,s_bFocus=!0;
(function(c){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(c){console.log(c)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIpad(){var c=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!c&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:c}
function isMobile(){return isIpad()?!0:navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}
function isIOS(){if(isIpad())return!0;for(var c="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");c.length;)if(navigator.platform===c.pop())return s_bIsIphone=!0;return s_bIsIphone=!1}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}
function getSize(c){var g=c.toLowerCase(),d=window.document,k=d.documentElement;if(void 0===window["inner"+c])c=k["client"+c];else if(window["inner"+c]!=k["client"+c]){var f=d.createElement("body");f.id="vpw-test-b";f.style.cssText="overflow:scroll";var a=d.createElement("div");a.id="vpw-test-d";a.style.cssText="position:absolute;top:-1000px";a.innerHTML="<style>@media("+g+":"+k["client"+c]+"px){body#vpw-test-b div#vpw-test-d{"+g+":7px!important}}</style>";f.appendChild(a);k.insertBefore(f,d.head);
c=7==a["offset"+c]?k["client"+c]:window["inner"+c];k.removeChild(f)}else c=window["inner"+c];return c}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var c=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<c?c:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var c=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var g=getSize("Width");s_bFocus&&_checkOrientation(g,c);s_iScaleFactor=Math.min(c/CANVAS_HEIGHT,g/CANVAS_WIDTH);var d=Math.round(CANVAS_WIDTH*s_iScaleFactor),k=Math.round(CANVAS_HEIGHT*s_iScaleFactor);if(k<c){var f=c-k;k+=f;d+=CANVAS_WIDTH/CANVAS_HEIGHT*f}else d<g&&(f=g-d,d+=f,k+=CANVAS_HEIGHT/CANVAS_WIDTH*f);f=c/2-k/2;var a=g/2-d/2,
e=CANVAS_WIDTH/d;if(a*e<-EDGEBOARD_X||f*e<-EDGEBOARD_Y)s_iScaleFactor=Math.min(c/(CANVAS_HEIGHT-2*EDGEBOARD_Y),g/(CANVAS_WIDTH-2*EDGEBOARD_X)),d=Math.round(CANVAS_WIDTH*s_iScaleFactor),k=Math.round(CANVAS_HEIGHT*s_iScaleFactor),f=(c-k)/2,a=(g-d)/2,e=CANVAS_WIDTH/d;s_fInverseScaling=e;s_iOffsetX=-1*a*e;s_iOffsetY=-1*f*e;0<=f&&(s_iOffsetY=0);0<=a&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);
s_bIsIphone&&s_oStage?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*d,s_oStage.canvas.height=2*k,canvas.style.width=d+"px",canvas.style.height=k+"px",s_iScaleFactor=2*Math.min(d/CANVAS_WIDTH,k/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",d+"px"),$("#canvas").css("height",k+"px"),s_iScaleFactor=1):s_oStage&&(s_oStage.canvas.width=d,s_oStage.canvas.height=k,s_iScaleFactor=Math.min(d/CANVAS_WIDTH,k/CANVAS_HEIGHT),s_oStage.scaleX=
s_oStage.scaleY=s_iScaleFactor);0>f||(f=(c-k)/2);$("#canvas").css("top",f+"px");$("#canvas").css("left",a+"px");s_iCanvasResizeWidth=d;s_iCanvasResizeHeight=k;s_iCanvasOffsetWidth=a;fullscreenHandler()}}
function _checkOrientation(c,g){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(c>g?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function createBitmap(c,g,d){var k=new createjs.Bitmap(c),f=new createjs.Shape;g&&d?f.graphics.beginFill("#fff").drawRect(-g/2,-d/2,g,d):f.graphics.beginFill("#ff0").drawRect(0,0,c.width,c.height);k.hitArea=f;return k}function createSprite(c,g,d,k,f,a){c=null!==g?new createjs.Sprite(c,g):new createjs.Sprite(c);g=new createjs.Shape;g.graphics.beginFill("#000000").drawRect(-d,-k,f,a);c.hitArea=g;return c}
function roundDecimal(c,g){var d=Math.pow(10,g);return Math.round(d*c)/d}function randomFloatBetween(c,g,d){"undefined"===typeof d&&(d=2);return parseFloat(Math.min(c+Math.random()*(g-c),g).toFixed(d))}function shuffle(c){for(var g=c.length,d,k;0!==g;)k=Math.floor(Math.random()*g),--g,d=c[g],c[g]=c[k],c[k]=d;return c}function formatTime(c){c/=1E3;var g=Math.floor(c/60);c=parseFloat(c-60*g).toFixed(1);var d="";d=10>g?d+("0"+g+":"):d+(g+":");return 10>c?d+("0"+c):d+c}
function degreesToRadians(c){return c*Math.PI/180}function checkRectCollision(c,g){var d=getBounds(c,.9);var k=getBounds(g,.98);return calculateIntersection(d,k)}
function calculateIntersection(c,g){var d,k,f,a;var e=c.x+(d=c.width/2);var h=c.y+(k=c.height/2);var b=g.x+(f=g.width/2);var t=g.y+(a=g.height/2);e=Math.abs(e-b)-(d+f);h=Math.abs(h-t)-(k+a);return 0>e&&0>h?(e=Math.min(Math.min(c.width,g.width),-e),h=Math.min(Math.min(c.height,g.height),-h),{x:Math.max(c.x,g.x),y:Math.max(c.y,g.y),width:e,height:h,rect1:c,rect2:g}):null}
function getBounds(c,g){var d={x:Infinity,y:Infinity,width:0,height:0};if(c instanceof createjs.Container){d.x2=-Infinity;d.y2=-Infinity;var k=c.children,f=k.length,a;for(a=0;a<f;a++){var e=getBounds(k[a],1);e.x<d.x&&(d.x=e.x);e.y<d.y&&(d.y=e.y);e.x+e.width>d.x2&&(d.x2=e.x+e.width);e.y+e.height>d.y2&&(d.y2=e.y+e.height)}Infinity==d.x&&(d.x=0);Infinity==d.y&&(d.y=0);Infinity==d.x2&&(d.x2=0);Infinity==d.y2&&(d.y2=0);d.width=d.x2-d.x;d.height=d.y2-d.y;delete d.x2;delete d.y2}else{if(c instanceof createjs.Bitmap){f=
c.sourceRect||c.image;a=f.width*g;var h=f.height*g}else if(c instanceof createjs.Sprite)if(c.spriteSheet._frames&&c.spriteSheet._frames[c.currentFrame]&&c.spriteSheet._frames[c.currentFrame].image){f=c.spriteSheet.getFrame(c.currentFrame);a=f.rect.width;h=f.rect.height;k=f.regX;var b=f.regY}else d.x=c.x||0,d.y=c.y||0;else d.x=c.x||0,d.y=c.y||0;k=k||0;a=a||0;b=b||0;h=h||0;d.regX=k;d.regY=b;f=c.localToGlobal(0-k,0-b);e=c.localToGlobal(a-k,h-b);a=c.localToGlobal(a-k,0-b);k=c.localToGlobal(0-k,h-b);d.x=
Math.min(Math.min(Math.min(f.x,e.x),a.x),k.x);d.y=Math.min(Math.min(Math.min(f.y,e.y),a.y),k.y);d.width=Math.max(Math.max(Math.max(f.x,e.x),a.x),k.x)-d.x;d.height=Math.max(Math.max(Math.max(f.y,e.y),a.y),k.y)-d.y}return d}function NoClickDelay(c){this.element=c;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(c){switch(c.type){case "touchstart":this.onTouchStart(c);break;case "touchmove":this.onTouchMove(c);break;case "touchend":this.onTouchEnd(c)}},onTouchStart:function(c){c.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(c){this.moved=!0},onTouchEnd:function(c){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){c=document.elementFromPoint(c.changedTouches[0].clientX,c.changedTouches[0].clientY);3==c.nodeType&&(c=c.parentNode);var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!0);c.dispatchEvent(g)}}};
(function(){function c(d){var k={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};d=d||window.event;d.type in k?document.body.className=k[d.type]:(document.body.className=this[g]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var g="hidden";g in document?document.addEventListener("visibilitychange",c):(g="mozHidden")in document?document.addEventListener("mozvisibilitychange",
c):(g="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",c):(g="msHidden")in document?document.addEventListener("msvisibilitychange",c):"onfocusin"in document?document.onfocusin=document.onfocusout=c:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=c})();function playSound(c,g,d){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[c].play(),s_aSounds[c].volume(g),s_aSounds[c].loop(d),s_aSounds[c]):null}
function stopSound(c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[c].stop()}function setVolume(c,g){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[c].volume(g)}function setMute(c,g){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[c].mute(g)}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(c){for(var g=window.location.search.substring(1).split("&"),d=0;d<g.length;d++){var k=g[d].split("=");if(k[0]==c)return k[1]}}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}
if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var c={},g,d,k,f,a,e;this.init=function(h,b,t){g={};k=d=0;f=h;a=b;e=t};this.addSprite=function(h,b){if(!c.hasOwnProperty(h)){var t=new Image;c[h]=g[h]={szPath:b,oSprite:t,bLoaded:!1};d++}};this.getSprite=function(h){return c.hasOwnProperty(h)?c[h].oSprite:null};this._onSpritesLoaded=function(){d=0;a.call(e)};this._onSpriteLoaded=function(){f.call(e);++k===d&&this._onSpritesLoaded()};this.loadSprites=function(){for(var h in g)g[h].oSprite.oSpriteLibrary=this,g[h].oSprite.szKey=
h,g[h].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},g[h].oSprite.onerror=function(b){var t=b.currentTarget;setTimeout(function(){g[t.szKey].oSprite.src=g[t.szKey].szPath},500)},g[h].oSprite.src=g[h].szPath};this.setLoaded=function(h){c[h].bLoaded=!0};this.isLoaded=function(h){return c[h].bLoaded};this.getNumSprites=function(){return d}}
var CANVAS_WIDTH=1280,CANVAS_HEIGHT=768,EDGEBOARD_X=90,EDGEBOARD_Y=95,FPS=30,FPS_TIME=1E3/FPS,DISABLE_SOUND_MOBILE=!1,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,STATE_GAME_WAITING_FOR_BET=0,STATE_GAME_COME_OUT=1,STATE_GAME_COME_POINT=2,ON_SHOW_BET_ON_TABLE=0,ON_SHOW_ENLIGHT=1,ON_HIDE_ENLIGHT=2,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,ON_CONTROLLER_END=6,ON_CONTROLLER_REMOVE=7,ON_CONTROLLER_ROLL=8,TOTAL_MONEY,NUM_FICHES=6,MIN_BET,MAX_BET,
WIN_OCCURRENCE,TIME_FICHES_MOV=1500,TIME_SHOW_DICES_RESULT,NUM_DICE_ROLLING_FRAMES=34,NUM_BALL_SPIN_FRAMES=200,NUM_HAND_FOR_ADS,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,SHOW_CREDITS,FONT1="arialbold",FONT2="Digital-7";
function CGameSettings(){var c,g,d,k;this._init=function(){this._initAttachFiches();this._initBetMultiplier();this._setPuckPos();c=[1,5,10,25,50,100];NUM_FICHES=c.length};this._initAttachFiches=function(){k=[];k.pass_line={x:360,y:555};k.dont_pass1={x:730,y:503};k.dont_pass2={x:254,y:320};k.dont_come={x:322,y:238};k.come={x:740,y:330};k.field={x:570,y:420};k.big_6={x:260,y:440};k.big_8={x:316,y:490};for(var f=[{value:4,x:408,y:142},{value:5,x:494,y:142},{value:6,x:580,y:142},{value:8,x:666,y:142},
{value:9,x:752,y:142},{value:10,x:838,y:142}],a=0;a<f.length;a++)k["lay_bet"+f[a].value]={x:f[a].x+20,y:f[a].y},k["lose_bet"+f[a].value]={x:f[a].x-20,y:f[a].y+20},k["number"+f[a].value]={x:f[a].x,y:f[a].y+69},k["win_bet"+f[a].value]={x:f[a].x,y:f[a].y+116};k.any11_7={x:1032,y:582};k.any_craps_7={x:1032,y:631};k.seven_bet={x:1032,y:356};k.hardway6={x:955,y:400};k.hardway10={x:1112,y:400};k.hardway8={x:955,y:460};k.hardway4={x:1112,y:460};k.horn3={x:930,y:520};k.horn2={x:1032,y:520};k.horn12={x:1134,
y:520};k.oDealerWin={x:CANVAS_WIDTH/2,y:-232};k.oReceiveWin={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT+100}};this._initBetMultiplier=function(){g=[];g.pass_line=1;g.dont_pass1=1;g.dont_pass2=1;g.dont_come=1;g.come=1;g.field=1;g.big_6=1;g.big_8=1;for(var f=[4,5,6,8,9,10],a=[.5,.66,.83,.83,.66,.5],e=[.45,.62,.8,.8,.62,.45],h=[2,1.5,1.2,1.2,1.5,2],b=[1.8,1.4,1.17,1.17,1.4,1.8],t=0;t<f.length;t++)g["lay_bet"+f[t]]=a[t],g["lose_bet"+f[t]]=e[t],g["number"+f[t]]=h[t],g["win_bet"+f[t]]=b[t];g.any11_7=15;g.any_craps_7=
7;g.seven_bet=4;g.hardway6=9;g.hardway10=7;g.hardway8=9;g.hardway4=7;g.horn3=15;g.horn2=30;g.horn12=30};this.generateFichesPileByIndex=function(f){var a=[],e=c.length-1,h=c[e];do{var b=f%h;b=roundDecimal(b,1);f=roundDecimal(f/h,1);f=Math.floor(f);for(var t=0;t<f;t++)a.push(this.getFicheIndexByValue(h));e--;h=c[e];f=b}while(0<b&&-1<e);return a};this._setPuckPos=function(){d=[];d[4]=410;d[5]=495;d[6]=580;d[8]=666;d[9]=752;d[10]=836};this.getBetWinLoss=function(f,a,e){var h=[0,0,0,0,0,0,0,0,0,0,0,0],
b=[0,0,0,0,0,0,0,0,0,0,0,0];switch(e){case "pass_line":f===STATE_GAME_COME_OUT?(h[6]=1,h[10]=1,b[1]=1,b[2]=1,b[11]=1):(h[a-1]=1,b[6]=1);break;case "come":h[6]=1;h[10]=1;b[1]=1;b[2]=1;b[11]=1;break;case "dont_pass1":case "dont_pass2":f===STATE_GAME_COME_OUT?(h[1]=1,h[2]=1,h[11]=1,b[6]=1,b[10]=1):(h[6]=1,b[a-1]=1);break;case "dont_come":h[1]=1;h[2]=1;h[11]=1;b[6]=1;b[10]=1;break;case "field":h[1]=1;h[2]=1;h[3]=1;h[8]=1;h[9]=1;h[10]=1;h[11]=1;b[0]=1;b[4]=1;b[5]=1;b[6]=1;b[7]=1;break;case "big_6":h[5]=
1;b[6]=1;break;case "big_8":h[7]=1;b[6]=1;break;case "lay_bet4":case "lose_bet4":h[6]=1;b[3]=1;break;case "lay_bet5":case "lose_bet5":h[6]=1;b[4]=1;break;case "lay_bet6":case "lose_bet6":h[6]=1;b[5]=1;break;case "lay_bet8":case "lose_bet8":h[6]=1;b[7]=1;break;case "lay_bet9":case "lose_bet9":h[6]=1;b[8]=1;break;case "lay_bet10":case "lose_bet10":h[6]=1;b[9]=1;break;case "number4":case "win_bet4":h[3]=1;b[6]=1;break;case "number5":case "win_bet5":h[4]=1;b[6]=1;break;case "number6":case "win_bet6":h[5]=
1;b[6]=1;break;case "number8":case "win_bet8":h[7]=1;b[6]=1;break;case "number9":case "win_bet9":h[8]=1;b[6]=1;break;case "number10":case "win_bet10":h[9]=1;b[6]=1;break;case "any11":h[10]=1;b[1]=1;b[2]=1;b[3]=1;b[4]=1;b[5]=1;b[6]=1;b[7]=1;b[8]=1;b[9]=1;b[11]=1;break;case "any_craps":h[1]=1;h[2]=1;h[11]=1;b[3]=1;b[4]=1;b[5]=1;b[6]=1;b[7]=1;b[8]=1;b[9]=1;b[10]=1;break;case "seven_bet":h[6]=1;b[1]=1;b[2]=1;b[3]=1;b[4]=1;b[5]=1;b[7]=1;b[8]=1;b[9]=1;b[10]=1;b[11]=1;break;case "hardway6":h[5]=1;b[1]=1;
b[2]=1;b[3]=1;b[4]=1;b[6]=1;b[7]=1;b[8]=1;b[9]=1;b[10]=1;b[11]=1;break;case "hardway10":h[9]=1;b[1]=1;b[2]=1;b[3]=1;b[4]=1;b[5]=1;b[6]=1;b[7]=1;b[8]=1;b[10]=1;b[11]=1;break;case "hardway8":h[7]=1;b[1]=1;b[2]=1;b[3]=1;b[4]=1;b[5]=1;b[6]=1;b[8]=1;b[9]=1;b[10]=1;b[11]=1;break;case "hardway4":h[3]=1;b[1]=1;b[2]=1;b[3]=1;b[5]=1;b[6]=1;b[7]=1;b[8]=1;b[9]=1;b[10]=1;b[11]=1;break;case "horn3":h[2]=1;b[1]=1;b[3]=1;b[4]=1;b[5]=1;b[6]=1;b[7]=1;b[8]=1;b[9]=1;b[10]=1;b[11]=1;break;case "horn2":h[1]=1;b[2]=1;b[3]=
1;b[4]=1;b[5]=1;b[6]=1;b[7]=1;b[8]=1;b[9]=1;b[10]=1;b[11]=1;break;case "horn12":h[11]=1,b[1]=1,b[2]=1,b[3]=1,b[4]=1,b[5]=1,b[6]=1,b[7]=1,b[8]=1,b[9]=1,b[10]=1}return{win:h,lose:b}};this.checkBetWin=function(f,a,e,h,b,t){var l=-1;switch(b){case "pass_line":if(a===STATE_GAME_COME_OUT)if(2===f||3===f||12===f)l=0;else{if(7===f||11===f)l=e*s_oGameSettings.getBetMultiplier(b)}else 7===f?l=0:f===h&&(l=e*s_oGameSettings.getBetMultiplier(b));break;case "come":7===f||11===f?l=e*s_oGameSettings.getBetMultiplier(b):
2===f||3===f||12===f?l=0:s_oGame.assignBetFromCome(f,b);break;case "dont_pass1":case "dont_pass2":a===STATE_GAME_COME_OUT?2===f||3===f?l=e*s_oGameSettings.getBetMultiplier(b):7===f||11===f?l=0:12===f&&(l=e):7===f?l=e*s_oGameSettings.getBetMultiplier(b):f===h&&(l=0);break;case "dont_come":2===f||7===f?l=e*s_oGameSettings.getBetMultiplier(b):7===f||11===f?l=0:s_oGame.assignBetFromDontCome(f,b);break;case "field":if(5===f||6===f||7===f||8===f)l=0;else if(l=e*s_oGameSettings.getBetMultiplier(b),2===f||
12===f)l*=2;break;case "big_6":6===f?l=e*s_oGameSettings.getBetMultiplier(b):7===f&&(l=0);break;case "big_8":8===f?l=e*s_oGameSettings.getBetMultiplier(b):7===f&&(l=0);break;case "lay_bet4":case "lose_bet4":7===f?(l=e*s_oGameSettings.getBetMultiplier(b),"lay_bet4"===b&&(l=roundDecimal(.05*l,2))):4===f&&(l=0);break;case "lay_bet5":case "lose_bet5":7===f?(l=e*s_oGameSettings.getBetMultiplier(b),"lay_bet5"===b&&(l=roundDecimal(.05*l,2))):5===f&&(l=0);break;case "lay_bet6":case "lose_bet6":7===f?(l=e*
s_oGameSettings.getBetMultiplier(b),"lay_bet6"===b&&(l=roundDecimal(.05*l,2))):6===f&&(l=0);break;case "lay_bet8":case "lose_bet8":7===f?(l=e*s_oGameSettings.getBetMultiplier(b),"lay_bet8"===b&&(l=roundDecimal(.05*l,2))):8===f&&(l=0);break;case "lay_bet9":case "lose_bet9":7===f?(l=e*s_oGameSettings.getBetMultiplier(b),"lay_bet9"===b&&(l=roundDecimal(.05*l,2))):9===f&&(l=0);break;case "lay_bet10":case "lose_bet10":7===f?(l=e*s_oGameSettings.getBetMultiplier(b),"lay_bet10"===b&&(l=roundDecimal(.05*
l,2))):10===f&&(l=0);break;case "number4":case "win_bet4":a===STATE_GAME_COME_POINT&&(4===f?(l=e*s_oGameSettings.getBetMultiplier(b),"number4"===b&&(l=roundDecimal(.05*e,2))):7===f&&(l=0));break;case "number5":case "win_bet5":a===STATE_GAME_COME_POINT&&(5===f?(l=e*s_oGameSettings.getBetMultiplier(b),"number5"===b&&(l=roundDecimal(.05*e,2))):7===f&&(l=0));break;case "number6":case "win_bet6":a===STATE_GAME_COME_POINT&&(6===f?(l=e*s_oGameSettings.getBetMultiplier(b),"number6"===b&&(l=roundDecimal(.05*
e,2))):7===f&&(l=0));break;case "number8":case "win_bet8":a===STATE_GAME_COME_POINT&&(8===f?(l=e*s_oGameSettings.getBetMultiplier(b),"number8"===b&&(l=roundDecimal(.05*e,2))):7===f&&(l=0));break;case "number9":case "win_bet9":a===STATE_GAME_COME_POINT&&(9===f?(l=e*s_oGameSettings.getBetMultiplier(b),"number9"===b&&(l=roundDecimal(.05*e,2))):7===f&&(l=0));break;case "number10":case "win_bet10":a===STATE_GAME_COME_POINT&&(10===f?(l=e*s_oGameSettings.getBetMultiplier(b),"number10"===b&&(l=roundDecimal(.05*
e,2))):7===f&&(l=0));break;case "any11_7":l=11===f?e*s_oGameSettings.getBetMultiplier(b):0;break;case "any_craps_7":l=2===f||3===f||12===f?e*s_oGameSettings.getBetMultiplier(b):0;break;case "seven_bet":l=7===f?e*s_oGameSettings.getBetMultiplier(b):0;break;case "hardway6":l=3===t[0]&&3===t[1]?e*s_oGameSettings.getBetMultiplier(b):0;break;case "hardway10":l=5===t[0]&&5===t[1]?e*s_oGameSettings.getBetMultiplier(b):0;break;case "hardway8":l=4===t[0]&&4===t[1]?e*s_oGameSettings.getBetMultiplier(b):0;break;
case "hardway4":l=2===t[0]&&2===t[1]?e*s_oGameSettings.getBetMultiplier(b):0;break;case "horn3":l=3===f?e*s_oGameSettings.getBetMultiplier(b):0;break;case "horn2":l=2===f?e*s_oGameSettings.getBetMultiplier(b):0;break;case "horn12":l=12===f?e*s_oGameSettings.getBetMultiplier(b):0}return l};this.getFicheValues=function(f){return c[f]};this.getFicheIndexByValue=function(f){for(var a=0,e=0;e<c.length;e++)if(f===c[e]){a=e;break}return a};this.getBetMultiplier=function(f){return g[f]};this.getAttachOffset=
function(f){return k[f]};this.getHelpMsgByBet=function(f){return(void 0)[f]};this.getPuckXByNumber=function(f){return d[f]};this._init()}
function CFichesController(c){var g,d,k,f;this._init=function(a){f=a;this.reset()};this.reset=function(){this._removeAllFichesOnTable();g=[];d=[];k=[]};this.setFicheOnTable=function(a,e,h){-1!==e.indexOf("any_craps_")?e="any_craps_7":-1!==e.indexOf("any11_")&&(e="any11_7");this.addFicheOnTable(a,e,h)};this.addFicheOnTable=function(a,e,h){void 0===g[e]&&(g[e]=0);a=s_oGameSettings.getFicheValues(a);g[e]+=a;g[e]=roundDecimal(g[e],1);a=s_oGameSettings.generateFichesPileByIndex(g[e]);a.sort(function(y,
v){return y-v});this._removeFichesPile(d[e]);d[e]=[];var b=s_oGameSettings.getAttachOffset(e),t=b.x;b=b.y;for(var l=0;l<a.length;l++)h.push(this._attachFichesPile(a[l],e,t,b)),b-=5};this._attachFichesPile=function(a,e,h,b){a=new CFiche(h,b,a,f);d[e].push(a);k.push(a);return a};this._removeAllFichesOnTable=function(){if(k)for(var a=0;a<k.length;a++)f.contains(k[a].getSprite())&&f.removeChild(k[a].getSprite())};this._removeFichesPile=function(a){for(var e in a)f.removeChild(a[e].getSprite())};this.removeBet=
function(a){d[a]=[];g[a]=0};this.swapBet=function(a,e){d[e]=d[a];g[e]=g[a];this.removeBet(a)};this.clearAllBets=function(){this._removeAllFichesOnTable();g=[];d=[];k=[]};this.clearAllBetsInComePoint=function(){if(d){var a=0,e;for(e in d)if("pass_line"!==e&&"dont_pass1"!==e&&"dont_pass2"!==e){a+=g[e];for(var h=0;h<d[e].length;h++)f.removeChild(d[e][h].getSprite());delete g[e];delete d[e];delete k[e]}}return a};this.getFicheMc=function(a){return d[a]};this.getBetAmountInPos=function(a){return g[a]};
this._init(c)}
function CPreloader(){var c,g,d,k,f,a,e,h,b;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.loadSprites();b=new createjs.Container;s_oStage.addChild(b)};this.unload=function(){b.removeAllChildren()};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};
this.attachSprites=function(){var t=new createjs.Shape;t.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);b.addChild(t);t=s_oSpriteLibrary.getSprite("200x200");e=createBitmap(t);e.regX=.5*t.width;e.regY=.5*t.height;e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/2-80;b.addChild(e);h=new createjs.Shape;h.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(e.x-100,e.y-100,200,200,10);b.addChild(h);e.mask=h;t=s_oSpriteLibrary.getSprite("progress_bar");k=createBitmap(t);k.x=CANVAS_WIDTH/2-t.width/
2;k.y=CANVAS_HEIGHT/2+70;b.addChild(k);c=t.width;g=t.height;f=new createjs.Shape;f.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(k.x,k.y,1,g);b.addChild(f);k.mask=f;d=new createjs.Text("","30px "+FONT1,"#fff");d.x=CANVAS_WIDTH/2;d.y=CANVAS_HEIGHT/2+120;d.textBaseline="alphabetic";d.textAlign="center";b.addChild(d);a=new createjs.Shape;a.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);b.addChild(a);createjs.Tween.get(a).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(a);
b.removeChild(a)})};this.refreshLoader=function(t){d.text=t+"%";100===t&&(s_oMain._onRemovePreloader(),d.visible=!1,k.visible=!1);f.graphics.clear();t=Math.floor(t*c/100);f.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(k.x,k.y,t,g)};this._init()}
function CMain(c){var g,d=0,k=0,f=STATE_LOADING,a,e;this.initContainer=function(){var b=document.getElementById("canvas");s_oStage=new createjs.Stage(b);s_bMobile=isMobile();!1===s_bMobile?s_oStage.enableMouseOver(20):createjs.Touch.enable(s_oStage,!0);s_iPrevTime=(new Date).getTime();createjs.Ticker.setFPS(FPS);createjs.Ticker.addEventListener("tick",this._update);navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;a=new CPreloader};this.soundLoaded=
function(){d++;a.refreshLoader(Math.floor(d/k*100))};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"chip",loop:!1,volume:1,ingamename:"chip"});s_aSoundsInfo.push({path:"./sounds/",filename:"click",loop:!1,volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",filename:"fiche_collect",loop:!1,volume:1,ingamename:"fiche_collect"});s_aSoundsInfo.push({path:"./sounds/",filename:"fiche_select",loop:!1,volume:1,ingamename:"fiche_select"});
s_aSoundsInfo.push({path:"./sounds/",filename:"dice_rolling",loop:!1,volume:1,ingamename:"dice_rolling"});s_aSoundsInfo.push({path:"./sounds/",filename:"win",loop:!1,volume:1,ingamename:"win"});s_aSoundsInfo.push({path:"./sounds/",filename:"lose",loop:!1,volume:1,ingamename:"lose"});k+=s_aSoundsInfo.length;s_aSounds=[];for(var b=0;b<s_aSoundsInfo.length;b++)this.tryToLoadSound(s_aSoundsInfo[b],!1)};this.tryToLoadSound=function(b,t){setTimeout(function(){s_aSounds[b.ingamename]=new Howl({src:[b.path+
b.filename+".mp3"],autoplay:!1,preload:!0,loop:b.loop,volume:b.volume,onload:s_oMain.soundLoaded,onloaderror:function(l,y){for(var v=0;v<s_aSoundsInfo.length;v++)if(0<s_aSounds[s_aSoundsInfo[v].ingamename]._sounds.length&&l===s_aSounds[s_aSoundsInfo[v].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[v],!0);break}else document.querySelector("#block_game").style.display="none"},onplayerror:function(l){for(var y=0;y<s_aSoundsInfo.length;y++)if(l===s_aSounds[s_aSoundsInfo[y].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[y].ingamename].once("unlock",
function(){s_aSounds[s_aSoundsInfo[y].ingamename].play()});break}}})},t?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("chip_box","./sprites/chip_box.png");
s_oSpriteLibrary.addSprite("but_bets","./sprites/but_bets.png");s_oSpriteLibrary.addSprite("but_bg","./sprites/but_bg.png");s_oSpriteLibrary.addSprite("but_clear_all","./sprites/but_clear_all.png");s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("logo_credits","./sprites/logo_credits.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");s_oSpriteLibrary.addSprite("ball","./sprites/ball.png");s_oSpriteLibrary.addSprite("enlight_any_craps",
"./sprites/enlight_any_craps.png");s_oSpriteLibrary.addSprite("enlight_big_6","./sprites/enlight_big_6.png");s_oSpriteLibrary.addSprite("enlight_big_8","./sprites/enlight_big_8.png");s_oSpriteLibrary.addSprite("enlight_circle","./sprites/enlight_circle.png");s_oSpriteLibrary.addSprite("enlight_come","./sprites/enlight_come.png");s_oSpriteLibrary.addSprite("enlight_dont_come","./sprites/enlight_dont_come.png");s_oSpriteLibrary.addSprite("enlight_dont_pass1","./sprites/enlight_dont_pass1.png");s_oSpriteLibrary.addSprite("enlight_dont_pass2",
"./sprites/enlight_dont_pass2.png");s_oSpriteLibrary.addSprite("enlight_field","./sprites/enlight_field.png");s_oSpriteLibrary.addSprite("enlight_lay_bet","./sprites/enlight_lay_bet.png");s_oSpriteLibrary.addSprite("enlight_lose_bet","./sprites/enlight_lose_bet.png");s_oSpriteLibrary.addSprite("enlight_number","./sprites/enlight_number.png");s_oSpriteLibrary.addSprite("enlight_pass_line","./sprites/enlight_pass_line.png");s_oSpriteLibrary.addSprite("enlight_proposition1","./sprites/enlight_proposition1.png");
s_oSpriteLibrary.addSprite("enlight_proposition2","./sprites/enlight_proposition2.png");s_oSpriteLibrary.addSprite("enlight_seven","./sprites/enlight_seven.png");s_oSpriteLibrary.addSprite("enlight_any11","./sprites/enlight_any11.png");s_oSpriteLibrary.addSprite("hit_area_any_craps","./sprites/hit_area_any_craps.png");s_oSpriteLibrary.addSprite("hit_area_big_8","./sprites/hit_area_big_8.png");s_oSpriteLibrary.addSprite("hit_area_big_6","./sprites/hit_area_big_6.png");s_oSpriteLibrary.addSprite("hit_area_circle",
"./sprites/hit_area_circle.png");s_oSpriteLibrary.addSprite("hit_area_come","./sprites/hit_area_come.png");s_oSpriteLibrary.addSprite("hit_area_dont_come","./sprites/hit_area_dont_come.png");s_oSpriteLibrary.addSprite("hit_area_dont_pass1","./sprites/hit_area_dont_pass1.png");s_oSpriteLibrary.addSprite("hit_area_dont_pass2","./sprites/hit_area_dont_pass2.png");s_oSpriteLibrary.addSprite("hit_area_field","./sprites/hit_area_field.png");s_oSpriteLibrary.addSprite("hit_area_lay_bet","./sprites/hit_area_lay_bet.png");
s_oSpriteLibrary.addSprite("hit_area_lose_bet","./sprites/hit_area_lose_bet.png");s_oSpriteLibrary.addSprite("hit_area_number","./sprites/hit_area_number.png");s_oSpriteLibrary.addSprite("hit_area_pass_line","./sprites/hit_area_pass_line.png");s_oSpriteLibrary.addSprite("hit_area_proposition1","./sprites/hit_area_proposition1.png");s_oSpriteLibrary.addSprite("hit_area_proposition2","./sprites/hit_area_proposition2.png");s_oSpriteLibrary.addSprite("hit_area_seven","./sprites/hit_area_seven.png");s_oSpriteLibrary.addSprite("hit_area_any11",
"./sprites/hit_area_any11.png");s_oSpriteLibrary.addSprite("select_fiche","./sprites/select_fiche.png");s_oSpriteLibrary.addSprite("roll_but","./sprites/roll_but.png");s_oSpriteLibrary.addSprite("dices_screen_bg","./sprites/dices_screen_bg.jpg");s_oSpriteLibrary.addSprite("logo_game_0","./sprites/logo_game_0.png");s_oSpriteLibrary.addSprite("board_table","./sprites/board_table.jpg");s_oSpriteLibrary.addSprite("display_bg","./sprites/display_bg.png");s_oSpriteLibrary.addSprite("puck","./sprites/puck.png");
s_oSpriteLibrary.addSprite("dice_topdown1","./sprites/dice_topdown1.png");s_oSpriteLibrary.addSprite("dice_topdown2","./sprites/dice_topdown2.png");s_oSpriteLibrary.addSprite("but_not","./sprites/but_not.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("dice_a","./sprites/dice_a.png");s_oSpriteLibrary.addSprite("dice_b","./sprites/dice_b.png");s_oSpriteLibrary.addSprite("dices_box","./sprites/dices_box.png");s_oSpriteLibrary.addSprite("but_fullscreen",
"./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");for(var b=0;b<NUM_FICHES;b++)s_oSpriteLibrary.addSprite("fiche_"+b,"./sprites/fiche_"+b+".png");for(b=0;b<NUM_DICE_ROLLING_FRAMES;b++)s_oSpriteLibrary.addSprite("launch_dices_"+b,"./sprites/launch_dice_anim/launch_dices_"+b+".png");k+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){d++;a.refreshLoader(Math.floor(d/k*100))};this._onAllImagesLoaded=function(){};
this.onImageLoadError=function(b){};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();g=!0};this._onRemovePreloader=function(){a.unload();s_oMain.gotoMenu()};this.gotoMenu=function(){new CMenu;f=STATE_MENU};this.gotoGame=function(){e=new CGame(h);f=STATE_GAME};this.gotoHelp=function(){new CHelp;f=STATE_HELP};this.stopUpdate=function(){g=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==
s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();g=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(b){if(!1!==g){var t=(new Date).getTime();s_iTimeElaps=t-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=t;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);f===STATE_GAME&&e.update();s_oStage.update(b)}};s_oMain=
this;var h=c;SHOW_CREDITS=c.show_credits;ENABLE_FULLSCREEN=c.fullscreen;ENABLE_CHECK_ORIENTATION=c.check_orientation;s_bAudioActive=c.audio_enable_on_startup;this.initContainer()}var s_bMobile,s_bAudioActive=!0,s_bFullscreen=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oDrawLayer,s_oStage,s_oMain=null,s_oSpriteLibrary,s_aSounds,s_aSoundsInfo;
function CTextButton(c,g,d,k,f,a,e,h,b){var t,l,y,v,B,r,E,u,z,p;this._init=function(D,F,m,x,w,q,G,K){t=!1;l=1;y=[];v=[];p=createBitmap(m);u=new createjs.Container;u.x=D;u.y=F;u.regX=m.width/2;u.regY=m.height/2;s_bMobile||(u.cursor="pointer");u.addChild(p,z);b.addChild(u);z=new CTLText(u,10,5,m.width-20,m.height-10,G,K,q,w,1,0,0,x,!0,!0,!1,!1);this._initListener()};this.unload=function(){u.off("mousedown",B);u.off("pressup",r);b.removeChild(u)};this.setVisible=function(D){u.visible=D};this.setAlign=
function(D){z.setHorizAlign(D)};this.setTextX=function(D){z.x=D};this.setScale=function(D){l=u.scaleX=u.scaleY=D};this.enable=function(){t=!1};this.disable=function(){t=!0};this._initListener=function(){B=u.on("mousedown",this.buttonDown);r=u.on("pressup",this.buttonRelease)};this.addEventListener=function(D,F,m){y[D]=F;v[D]=m};this.addEventListenerWithParams=function(D,F,m,x){y[D]=F;v[D]=m;E=x};this.buttonRelease=function(){t||(playSound("click",1,!1),u.scaleX=l,u.scaleY=l,y[ON_MOUSE_UP]&&y[ON_MOUSE_UP].call(v[ON_MOUSE_UP],
E))};this.buttonDown=function(){t||(u.scaleX=.9*l,u.scaleY=.9*l,y[ON_MOUSE_DOWN]&&y[ON_MOUSE_DOWN].call(v[ON_MOUSE_DOWN]))};this.setPosition=function(D,F){u.x=D;u.y=F};this.tweenPosition=function(D,F,m,x,w,q,G){createjs.Tween.get(u).wait(x).to({x:D,y:F},m,w).call(function(){void 0!==q&&q.call(G)})};this.changeText=function(D){z.refreshText(D)};this.setX=function(D){u.x=D};this.setY=function(D){u.y=D};this.getButtonImage=function(){return u};this.getX=function(){return u.x};this.getY=function(){return u.y};
this.getSprite=function(){return u};this.getScale=function(){return u.scaleX};this._init(c,g,d,k,f,a,e,h)}
function CGfxButton(c,g,d,k){var f,a,e,h,b,t,l,y,v,B,r;this._init=function(u,z,p){f=!1;h=[];b=[];r=createBitmap(p);a=p.width;e=p.height;r.x=u;r.y=z;r.regX=p.width/2;r.regY=p.height/2;s_bMobile||(r.cursor="pointer");E.addChild(r);this._initListener()};this.unload=function(){r.off("mousedown",l);r.off("pressup",y);!1===s_bMobile&&(r.off("rollover",v),r.off("rollout",B));E.removeChild(r)};this.setVisible=function(u){r.visible=u};this.enable=function(){f=!1;r.filters=[];r.cache(0,0,a,e)};this.disable=
function(){f=!0;var u=(new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);r.filters=[new createjs.ColorMatrixFilter(u)];r.cache(0,0,a,e)};this._initListener=function(){l=r.on("mousedown",this.buttonDown);y=r.on("pressup",this.buttonRelease);!1===s_bMobile&&(v=r.on("rollover",this.mouseOver),B=r.on("rollout",this.mouseOut))};this.addEventListener=function(u,z,p){h[u]=z;b[u]=p};this.addEventListenerWithParams=function(u,z,p,D){h[u]=z;b[u]=p;t=D};this.buttonRelease=function(){f||(playSound("click",
1,!1),r.scaleX=1,r.scaleY=1,h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(b[ON_MOUSE_UP],t))};this.buttonDown=function(){f||(r.scaleX=.9,r.scaleY=.9,h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(b[ON_MOUSE_DOWN],t))};this.mouseOver=function(){h[ON_MOUSE_OVER]&&h[ON_MOUSE_OVER].call(b[ON_MOUSE_OVER],t)};this.mouseOut=function(){h[ON_MOUSE_OUT]&&h[ON_MOUSE_OUT].call(b[ON_MOUSE_OUT],t)};this.setPosition=function(u,z){r.x=u;r.y=z};this.setX=function(u){r.x=u};this.setY=function(u){r.y=u};this.getX=function(){return r.x};
this.getY=function(){return r.y};var E=k;this._init(c,g,d);return this}
function CFicheBut(c,g,d){var k,f,a,e,h,b,t=[],l,y,v;this._init=function(B,r,E){f=!1;y=new createjs.Container;s_oStage.addChild(y);k=!1;h=[];b=[];l=createBitmap(E);l.x=B;l.y=r;l.regX=E.width/2;l.regY=E.height/2;s_bMobile||(l.cursor="pointer");y.addChild(l);a=E.width;e=E.height;E=s_oSpriteLibrary.getSprite("select_fiche");v=createBitmap(E);v.x=B-2;v.y=r-2;v.regX=E.width/2;v.regY=E.height/2;y.addChild(v);v.visible=k;this._initListener()};this.unload=function(){l.off("mousedown",this.buttonDown);l.off("pressup",
this.buttonRelease);s_oStage.removeChild(y)};this.select=function(){k=!0;v.visible=k};this.deselect=function(){k=!1;v.visible=k};this.enable=function(){f=!1;l.filters=[];l.cache(0,0,a,e)};this.disable=function(){f=!0;var B=(new createjs.ColorMatrix).adjustSaturation(-90);l.filters=[new createjs.ColorMatrixFilter(B)];l.cache(0,0,a,e)};this.setVisible=function(B){l.visible=B};this._initListener=function(){l.on("mousedown",this.buttonDown);l.on("pressup",this.buttonRelease)};this.addEventListener=function(B,
r,E){h[B]=r;b[B]=E};this.addEventListenerWithParams=function(B,r,E,u){h[B]=r;b[B]=E;t=u};this.buttonRelease=function(){f||(playSound("click",1,!1),l.scaleX=1,l.scaleY=1,h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(b[ON_MOUSE_UP],t),k=!k,v.visible=k)};this.buttonDown=function(){f||(l.scaleX=.9,l.scaleY=.9,h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(b[ON_MOUSE_DOWN],t))};this.setPosition=function(B,r){l.x=B;l.y=r};this.setX=function(B){l.x=B};this.setY=function(B){l.y=B};this.getX=function(){return l.x};this.getY=
function(){return l.y};this._init(c,g,d)}
function CBetTableButton(c,g,d,k,f){var a,e,h,b,t;this._init=function(l,y,v,B,r){b=B;a=[];e=[];t=r;h=createBitmap(v);h.x=l;h.y=y;h.regX=v.width/2;h.regY=v.height/2;s_bMobile||(h.cursor="pointer");this._initListener();t.addChild(h)};this.unload=function(){h.off("mousedown",this.buttonDown);h.off("pressup",this.buttonRelease);h.off("rollover",this.mouseOver);h.off("rollout",this.mouseOut);t.removeChild(h)};this.setVisible=function(l){h.visible=l};this._initListener=function(){h.on("mousedown",this.buttonDown);
h.on("pressup",this.buttonRelease);h.on("rollover",this.mouseOver);h.on("rollout",this.mouseOut)};this.addEventListener=function(l,y,v){a[l]=y;e[l]=v};this.buttonRelease=function(){playSound("click",1,!1);a[ON_MOUSE_UP]&&a[ON_MOUSE_UP].call(e[ON_MOUSE_UP],{button:b},!1)};this.buttonDown=function(){a[ON_MOUSE_DOWN]&&a[ON_MOUSE_DOWN].call(e[ON_MOUSE_DOWN],{button:b},!1)};this.mouseOver=function(){a[ON_MOUSE_OVER]&&a[ON_MOUSE_OVER].call(e[ON_MOUSE_OVER],{enlight:b})};this.mouseOut=function(){a[ON_MOUSE_OUT]&&
a[ON_MOUSE_OUT].call(e[ON_MOUSE_OUT],{enlight:b})};this.setPosition=function(l,y){h.x=l;h.y=y};this.setX=function(l){h.x=l};this.setY=function(l){h.y=l};this.getX=function(){return h.x};this.getY=function(){return h.y};this._init(c,g,d,k,f)}
function CToggle(c,g,d,k,f){var a,e,h,b,t,l,y;this._init=function(v,B,r,E,u){y=void 0!==u?u:s_oStage;e=[];h=[];u=new createjs.SpriteSheet({images:[r],frames:{width:r.width/2,height:r.height,regX:r.width/2/2,regY:r.height/2},animations:{state_true:[0],state_false:[1]}});a=E;b=createSprite(u,"state_"+a,r.width/2/2,r.height/2,r.width/2,r.height);b.x=v;b.y=B;b.stop();s_bMobile||(b.cursor="pointer");y.addChild(b);this._initListener()};this.unload=function(){b.off("mousedown",t);b.off("pressup",l);y.removeChild(b)};
this._initListener=function(){t=b.on("mousedown",this.buttonDown);l=b.on("pressup",this.buttonRelease)};this.addEventListener=function(v,B,r){e[v]=B;h[v]=r};this.setCursorType=function(v){b.cursor=v};this.setActive=function(v){a=v;b.gotoAndStop("state_"+a)};this.buttonRelease=function(){b.scaleX=1;b.scaleY=1;playSound("click",1,!1);a=!a;b.gotoAndStop("state_"+a);e[ON_MOUSE_UP]&&e[ON_MOUSE_UP].call(h[ON_MOUSE_UP],a)};this.buttonDown=function(){b.scaleX=.9;b.scaleY=.9;e[ON_MOUSE_DOWN]&&e[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN])};
this.setPosition=function(v,B){b.x=v;b.y=B};this._init(c,g,d,k,f)}
function CMenu(){var c,g,d,k,f,a,e,h,b,t,l,y,v,B=null,r=null,E;this._init=function(){b=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(b);var u=s_oSpriteLibrary.getSprite("but_play");f=CANVAS_WIDTH/2;a=CANVAS_HEIGHT-110;t=new CGfxButton(f,a,u,s_oStage);t.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);u=s_oSpriteLibrary.getSprite("but_credits");SHOW_CREDITS?(c=CANVAS_WIDTH-u.height/2-10,g=u.height/2+10,l=new CGfxButton(c,g,u,s_oStage),l.addEventListener(ON_MOUSE_UP,
this._onCredits,this),u=s_oSpriteLibrary.getSprite("audio_icon"),e=c-u.width/2-10):(u=s_oSpriteLibrary.getSprite("audio_icon"),e=CANVAS_WIDTH-u.height/2-10);h=u.height/2+10;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)y=new CToggle(e,h,u,s_bAudioActive,s_oStage),y.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);u=window.document;var z=u.documentElement;B=z.requestFullscreen||z.mozRequestFullScreen||z.webkitRequestFullScreen||z.msRequestFullscreen;r=u.exitFullscreen||u.mozCancelFullScreen||
u.webkitExitFullscreen||u.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(B=!1);B&&screenfull.isEnabled&&(u=s_oSpriteLibrary.getSprite("but_fullscreen"),d=10+u.width/4,k=u.height/2+10,v=new CToggle(d,k,u,s_bFullscreen,s_oStage),v.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));E=new createjs.Shape;E.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(E);createjs.Tween.get(E).to({alpha:0},400).call(function(){E.visible=!1});this.refreshButtonPos(s_iOffsetX,
s_iOffsetY)};this.refreshButtonPos=function(u,z){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||y.setPosition(e-u,z+h);B&&screenfull.isEnabled&&v.setPosition(d+u,k+z);SHOW_CREDITS&&l.setPosition(c-u,z+g);t.setPosition(f,a-z)};this.unload=function(){t.unload();t=null;SHOW_CREDITS&&(l.unload(),l=null);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)y.unload(),y=null;B&&screenfull.isEnabled&&v.unload();s_oStage.removeChild(b);b=null;s_oStage.removeChild(E);s_oMenu=E=null};this._onButPlayRelease=function(){this.unload();
s_oMain.gotoGame();$(s_oMain).trigger("start_session")};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){B&&screenfull.isEnabled&&v.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?r.call(window.document):B.call(window.document.documentElement);sizeHandler()};this._onCredits=function(){new CCreditsPanel};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(c){var g=!1,d,k,f,a,e,h,b,t,l,y,v,B,r,E,u,z,p,D,F,m;this._init=function(){s_oTweenController=new CTweenController;s_oGameSettings=new CGameSettings;p=new CTableController;p.addEventListener(ON_SHOW_ENLIGHT,this._onShowEnlight);p.addEventListener(ON_HIDE_ENLIGHT,this._onHideEnlight);p.addEventListener(ON_SHOW_BET_ON_TABLE,this._onShowBetOnTable);d=!1;b=0;a=k=-1;v={};r=new CSeat;u=new CPuck(325,108,s_oStage);z=new CInterface;E=new CDicesAnim(240,159);m=new CAreYouSurePanel(s_oStage);
F=new CGameOver;D=new CMsgBox;t=[];f=0;this._onSitDown();g=!0};this.unload=function(){z.unload();p.unload();D.unload();F.unload();E.unload();s_oStage.removeAllChildren()};this._setState=function(w){k=w;switch(w){case STATE_GAME_WAITING_FOR_BET:if(r.getCredit()<s_oGameSettings.getFicheValues(0)){k=-1;setTimeout(function(){z.hideBlock();F.show()},2E3);return}a=-1;e=0;h=Math.floor(3*Math.random()+3);z.enableClearButton();0===r.getCurBet()&&z.enableRoll(!1);b++;b>NUM_HAND_FOR_ADS&&(b=0,$(s_oMain).trigger("show_interlevel_ad"));
z.hideBlock()}p.setState(w)};this._prepareForRolling=function(){z.disableBetFiches();z.disableClearButton();e++;l=[];this._generateWinLoss();t.push(l);f=0};this._generateWinLoss=function(){var w=x<2*r.getCurBet()?0:WIN_OCCURRENCE;var q;for(q in v){-1!==q.indexOf("any11_")?q="any11":-1!==q.indexOf("any_craps")&&(q="any_craps");var G=s_oGameSettings.getBetWinLoss(k,a,q);var K=G.lose;G=G.win}if(Math.floor(100*Math.random())>=w)if(e>h){do w=this._generateRandomDices(),q=w[0]+w[1];while(0===K[q-1])}else{do w=
this._generateRandomDices(),q=w[0]+w[1],q=0===G[q-1]?!0:!1;while(!q)}else if(e>h)if(-1!==q.indexOf("hardway"))w=this._checkHardwayWin(q);else{do w=this._generateRandomDices(),q=w[0]+w[1];while(0===G[q-1])}else if(-1!==q.indexOf("hardway"))w=this._checkHardwayWin(q);else{do w=this._generateRandomDices(),q=w[0]+w[1],q=0===K[q-1]?!1:!0;while(q)}l[0]=w[0];l[1]=w[1]};this._generateRandomDices=function(){var w=[],q=Math.floor(6*Math.random())+1;w.push(q);q=Math.floor(6*Math.random())+1;w.push(q);return w};
this._checkHardwayWin=function(w){var q=6,G=6;switch(w){case "hardway6":G=q=3;break;case "hardway10":G=q=5;break;case "hardway8":G=q=4;break;case "hardway4":G=q=2}do w=this._generateRandomDices();while(w[0]!==q||w[1]!==G);return w};this._startRollingAnim=function(){E.startRolling(l)};this.dicesAnimEnded=function(){var w=l[0]+l[1];if(k===STATE_GAME_COME_OUT){2!==w&&3!==w&&12!==w&&7!==w&&11!==w&&this._assignNumber(w);this._checkWinForBet();if(0<y.length){d=!0;for(var q=0;q<B.length;q++)r.removeBet(B[q]),
delete v[B[q]];z.setCurBet(r.getCurBet())}-1!==a&&this._setState(STATE_GAME_COME_POINT)}else{this._checkWinForBet();if(0<y.length){d=!0;for(q=0;q<B.length;q++)r.removeBet(B[q]),delete v[B[q]];z.setCurBet(r.getCurBet())}a===w?(u.switchOff(),this._setState(STATE_GAME_WAITING_FOR_BET)):7===w&&(u.switchOff(),this._setState(STATE_GAME_WAITING_FOR_BET))}z.setMoney(r.getCredit());0<Object.keys(v).length&&(z.enableRoll(!0),z.enableClearButton());z.hideBlock();z.enableBetFiches();$(s_oMain).trigger("save_score",
[r.getCredit()])};this._assignNumber=function(w){a=w;w=s_oGameSettings.getPuckXByNumber(a);u.switchOn(w);z.hideBlock()};this._checkWinForBet=function(){var w=l[0]+l[1],q=0;y=[];B=[];for(var G in v){var K=G;-1!==G.indexOf("any11_")?G="any11_7":-1!==G.indexOf("any_craps")&&(G="any_craps_7");var N=r.getBetAmountInPos(K),O=s_oGameSettings.checkBetWin(w,k,N,a,G,l);if(-1!==O){q+=O;var U=r.getFicheMc(G);B.push(K);for(var V=0;V<U.length;V++){y.push(U[V]);if(0<O){var W=s_oGameSettings.getAttachOffset("oReceiveWin");
playSound("win",.2,!1)}else W=s_oGameSettings.getAttachOffset("oDealerWin"),playSound("lose",.2,!1);U[V].setEndPoint(W.x,W.y)}r.decreaseBet(N);0<O&&(r.showWin(r.getBetAmountInPos(K)+O),x-=O,K=U[0].getStartingPos(),new CScoreText(O+TEXT_CURRENCY,K.x,K.y))}}0<q&&(z.refreshMsgHelp(TEXT_YOU_WIN+": "+q),setTimeout(function(){z.clearMsgHelp()},3E3))};this.assignBetFromCome=function(w,q){for(var G=r.getFicheMc(q),K=0;K<G.length;K++){y.push(G[K]);var N=s_oGameSettings.getAttachOffset("number"+w);G[K].setEndPoint(N.x,
N.y)}v["number"+w]=v[q];delete v[q];r.swapBet(q,"number"+w)};this.assignBetFromDontCome=function(w,q){for(var G=r.getFicheMc(q),K=0;K<G.length;K++){y.push(G[K]);var N=s_oGameSettings.getAttachOffset("lay_bet"+w);G[K].setEndPoint(N.x,N.y)}v["lay_bet"+w]=v[q];delete v[q];r.swapBet(q,"lay_bet"+w)};this.onRecharge=function(w){r.recharge(w);z.setMoney(r.getCredit());this._setState(STATE_GAME_WAITING_FOR_BET);F.hide()};this.onRoll=function(){0!==r.getCurBet()&&(r.getCurBet()<MIN_BET?(D.show(TEXT_ERROR_MIN_BET),
z.enableBetFiches(),z.enableRoll(!0)):z.isBlockVisible()||(z.showBlock(),k===STATE_GAME_WAITING_FOR_BET&&this._setState(STATE_GAME_COME_OUT),$(s_oMain).trigger("bet_placed",r.getCurBet()),this._prepareForRolling(),this._startRollingAnim()))};this._onSitDown=function(){this._setState(STATE_GAME_WAITING_FOR_BET);r.setInfo(TOTAL_MONEY,p.getContainer());z.setMoney(TOTAL_MONEY);z.setCurBet(0)};this._onShowBetOnTable=function(w){if(!d){var q=w.button,G=z.getCurFicheSelected(),K=s_oGameSettings.getFicheValues(G),
N=r.getCurBet();0>r.getCredit()-K?D.show(TEXT_ERROR_NO_MONEY_MSG):N+K>MAX_BET?D.show(TEXT_ERROR_MAX_BET_REACHED):(v[w.button]=void 0===v[w.button]?K:v[w.button]+K,r.addFicheOnTable(K,G,q),z.setMoney(r.getCredit()),z.setCurBet(r.getCurBet()),z.enableRoll(!0),z.enableClearButton(),z.refreshMsgHelp(TEXT_READY_TO_ROLL,!0),playSound("chip",1,!1))}};this._onShowEnlight=function(w){if(w=w.enlight)p.enlight(w),z.refreshMsgHelp(TEXT_HELP_MSG[w],!1)};this._onHideEnlight=function(w){if(w=w.enlight)p.enlightOff(w),
z.clearMsgHelp()};this.onClearAllBets=function(){$(s_oMain).trigger("clear_bet",r.getCurBet());if(k===STATE_GAME_COME_POINT){r.clearAllBetsInComePoint();for(var w in v)"pass_line"!==w&&"dont_pass1"!==w&&"dont_pass2"!==w&&delete v[w]}else r.clearAllBets(),v={},z.enableRoll(!1);z.setMoney(r.getCredit());z.setCurBet(r.getCurBet());z.enableRoll(!1);z.disableClearButton()};this.onExit=function(w){w?(this.unload(),s_oMain.gotoMenu()):m.show()};this.onConfirmExit=function(){this.unload();s_oMain.gotoMenu();
$(s_oMain).trigger("end_session");$(s_oMain).trigger("share_event",r.getCredit())};this._updateDistributeFiches=function(){f+=s_iTimeElaps;if(f>TIME_FICHES_MOV)f=0,d=!1,playSound("fiche_collect",1,!1);else for(var w=s_oTweenController.easeInOutCubic(f,0,1,TIME_FICHES_MOV),q=0;q<y.length;q++)y[q].updatePos(w)};this.update=function(){!1!==g&&(d&&this._updateDistributeFiches(),E.isVisible()&&E.update())};s_oGame=this;TOTAL_MONEY=c.money;MIN_BET=c.min_bet;MAX_BET=c.max_bet;WIN_OCCURRENCE=c.win_occurrence;
TIME_SHOW_DICES_RESULT=c.time_show_dice_result;NUM_HAND_FOR_ADS=c.num_hand_before_ads;var x=c.casino_cash;this._init()}var s_oGame,s_oTweenController,s_oGameSettings;
function CInterface(){var c,g,d,k,f,a,e,h,b,t,l,y,v,B,r,E,u,z,p=null,D=null,F;this._init=function(){var m=createBitmap(s_oSpriteLibrary.getSprite("but_bg"));m.x=251;m.y=603;s_oStage.addChild(m);new CTLText(s_oStage,260,616,140,16,16,"center","#fff",FONT1,1,0,0,TEXT_MONEY,!0,!0,!1,!1);y=new CTLText(s_oStage,260,636,140,16,16,"center","#fff",FONT1,1,0,0," ",!0,!0,!1,!1);m=createBitmap(s_oSpriteLibrary.getSprite("but_bg"));m.x=410;m.y=603;s_oStage.addChild(m);new CTLText(s_oStage,419,616,140,16,16,"center",
"#fff",FONT1,1,0,0,TEXT_CUR_BET,!0,!0,!1,!1);v=new CTLText(s_oStage,419,636,140,16,16,"center","#fff",FONT1,1,0,0," ",!0,!0,!1,!1);r=createBitmap(s_oSpriteLibrary.getSprite("but_bets"));r.x=575;r.y=610;s_oStage.addChild(r);new CTLText(s_oStage,r.x+4,r.y+4,140,40,16,"center","#fff",FONT1,1.2,0,0,TEXT_MIN_BET+": "+MIN_BET+"\n"+TEXT_MAX_BET+": "+MAX_BET,!0,!0,!0,!1);m=createBitmap(s_oSpriteLibrary.getSprite("display_bg"));m.x=880;m.y=210;s_oStage.addChild(m);B=new CTLText(s_oStage,m.x+114,m.y+13,130,
80,20,"center","#ffde00",FONT2,1,0,0,TEXT_WAITING_BET,!0,!0,!0,!1);h=TEXT_WAITING_BET;E=new CTextButton(1030,162,s_oSpriteLibrary.getSprite("roll_but"),"  "+TEXT_ROLL,FONT1,"#fff",22,"right",s_oStage);E.disable();E.addEventListener(ON_MOUSE_UP,this._onRoll,this);u=new CGfxButton(764,636,s_oSpriteLibrary.getSprite("but_clear_all"),s_oStage);u.addEventListener(ON_MOUSE_UP,this._onClearAllBet,this);this._initFichesBut();e=0;b[e].select();m=(new createjs.Graphics).beginFill("rgba(0,0,0,0.01)").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);F=new createjs.Shape(m);F.on("click",function(){});F.visible=!1;s_oStage.addChild(F);m=s_oSpriteLibrary.getSprite("but_exit");c=CANVAS_WIDTH-m.width/2-10;g=m.height/2+10;t=new CGfxButton(c,g,m,s_oStage);t.addEventListener(ON_MOUSE_UP,this._onExit,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)m=s_oSpriteLibrary.getSprite("audio_icon"),f=c-m.width/2-10,a=m.height/2+10,l=new CToggle(f,a,m,s_bAudioActive,s_oStage),l.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);
m=window.document;var x=m.documentElement;p=x.requestFullscreen||x.mozRequestFullScreen||x.webkitRequestFullScreen||x.msRequestFullscreen;D=m.exitFullscreen||m.mozCancelFullScreen||m.webkitExitFullscreen||m.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(p=!1);p&&screenfull.isEnabled&&(m=s_oSpriteLibrary.getSprite("but_fullscreen"),d=10+m.width/4,k=m.height/2+10,z=new CToggle(d,k,m,s_bFullscreen,s_oStage),z.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};
this.unload=function(){t.unload();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||l.unload();p&&screenfull.isEnabled&&z.unload();E.unload();u.unload();s_oInterface=null};this.refreshButtonPos=function(m,x){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||l.setPosition(f-m,a+x);p&&screenfull.isEnabled&&z.setPosition(d+m,k+x);t.setPosition(c-m,g+x)};this.hideBlock=function(){F.visible=!1};this.showBlock=function(){F.visible=!0};this.enableBetFiches=function(){for(var m=0;m<NUM_FICHES;m++)b[m].enable()};this.enableClearButton=
function(){u.enable()};this.disableBetFiches=function(){for(var m=0;m<NUM_FICHES;m++)b[m].disable()};this.disableClearButton=function(){u.disable()};this.deselectAllFiches=function(){for(var m=0;m<NUM_FICHES;m++)b[m].deselect()};this.enableRoll=function(m){m?E.enable():E.disable()};this._initFichesBut=function(){var m=createBitmap(s_oSpriteLibrary.getSprite("chip_box"));m.x=82;m.y=94;s_oStage.addChild(m);m=144;b=[];for(var x=0;x<NUM_FICHES;x++){var w=s_oSpriteLibrary.getSprite("fiche_"+x);b[x]=new CFicheBut(124,
m,w);b[x].addEventListenerWithParams(ON_MOUSE_UP,this._onFicheSelected,this,[x]);m+=w.height+25}};this.setMoney=function(m){y.refreshText(m.toFixed(2)+TEXT_CURRENCY)};this.refreshMoney=function(m,x){new CRollingTextController(y.getText(),null,m,parseFloat(x),4E3,EASE_LINEAR,TEXT_CURRENCY)};this.setCurBet=function(m){v.refreshText(m.toFixed(2)+TEXT_CURRENCY)};this.refreshMsgHelp=function(m,x){B.refreshText(m);x&&(h=m)};this.clearMsgHelp=function(){B.refreshText(h)};this._onBetRelease=function(m){null!==
m.numbers&&s_oGame._onShowBetOnTable({button:m.name},!1)};this._onFicheSelected=function(m){playSound("fiche_collect",1,!1);this.deselectAllFiches();m=m[0];for(var x=0;x<NUM_FICHES;x++)x===m&&(e=x)};this._onRoll=function(){this.disableBetFiches();this.enableRoll(!1);s_oGame.onRoll()};this._onClearAllBet=function(){s_oGame.onClearAllBets()};this._onExit=function(){s_oGame.onExit(!1)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=
function(){p&&screenfull.isEnabled&&z.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?D.call(window.document):p.call(window.document.documentElement);sizeHandler()};this.getCurFicheSelected=function(){return e};this.isBlockVisible=function(){return F.visible};s_oInterface=this;this._init();return this}var s_oInterface=null;
function CMsgBox(){var c,g,d;this._init=function(){d=new createjs.Container;d.alpha=0;d.visible=!1;s_oStage.addChild(d);c=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));c.on("click",function(){});d.addChild(c);g=new CTLText(d,CANVAS_WIDTH/2-240,240,480,290,24,"center","#fff",FONT1,1,0,0," ",!0,!0,!0,!1)};this.unload=function(){c.off("click",function(){})};this.show=function(k){g.refreshText(k);d.alpha=0;d.visible=!0;var f=this;createjs.Tween.get(d).to({alpha:1},500);setTimeout(function(){f._onExit()},
2E3)};this._onExit=function(){d.visible&&(d.visible=!1)};this._init();return this}
function CTweenController(){this.tweenValue=function(c,g,d){return c+d*(g-c)};this.easeLinear=function(c,g,d,k){return d*c/k+g};this.easeInCubic=function(c,g,d,k){k=(c/=k)*c*c;return g+d*k};this.easeBackInQuart=function(c,g,d,k){k=(c/=k)*c;return g+d*(2*k*k+2*k*c+-3*k)};this.easeInBack=function(c,g,d,k){return d*(c/=k)*c*(2.70158*c-1.70158)+g};this.easeOutCubic=function(c,g,d,k){return d*((c=c/k-1)*c*c+1)+g};this.easeInOutCubic=function(c,g,d,k){return 1>(c/=k/2)?d/2*c*c*c+g:d/2*((c-=2)*c*c+2)+g};
this.tweenVectors=function(c,g,d,k){k.x=c.x+d*(g.x-c.x);k.y=c.y+d*(g.y-c.y);return k}}
function CSeat(){var c,g,d,k;this._init=function(){this.reset()};this.reset=function(){d=[];k&&k.reset();c=0};this.setInfo=function(f,a){g=f;c=0;k=new CFichesController(a)};this.setFicheBetted=function(f,a,e){c+=f*e;g-=f*e;g=roundDecimal(g,1)};this.addFicheOnTable=function(f,a,e){var h=[];k.setFicheOnTable(a,e,h);this.setFicheBetted(f,h,1)};this.decreaseBet=function(f){c-=f};this.removeBet=function(f){k.removeBet(f)};this.swapBet=function(f,a){k.swapBet(f,a)};this.clearAllBets=function(){k.clearAllBets();
g+=c;g=roundDecimal(g,1);c=0};this.clearAllBetsInComePoint=function(){var f=k.clearAllBetsInComePoint();c-=f;g+=f;g=roundDecimal(g,1)};this.showWin=function(f){g+=f;g=roundDecimal(g,1)};this.recharge=function(f){g=f};this.getCurBet=function(){return c};this.getCredit=function(){return g};this.getNumberSelected=function(){return d};this.getFicheMc=function(f){return k.getFicheMc(f)};this.getBetAmountInPos=function(f){return k.getBetAmountInPos(f)};this._init()}
function CTableController(){var c,g,d,k,f;this._init=function(){d=new createjs.Container;s_oStage.addChild(d);var a=createBitmap(s_oSpriteLibrary.getSprite("board_table"));d.addChild(a);this._initEnlights();this._initButtonBets();this.setState(STATE_GAME_WAITING_FOR_BET);k=[];f=[]};this._initEnlights=function(){g=[];var a=new CEnlight(175,162,s_oSpriteLibrary.getSprite("enlight_pass_line"),d);g.pass_line=a;a=new CEnlight(365,476,s_oSpriteLibrary.getSprite("enlight_dont_pass1"),d);g.dont_pass1=a;a=
new CEnlight(227,127,s_oSpriteLibrary.getSprite("enlight_dont_pass2"),d);g.dont_pass2=a;a=new CEnlight(279,127,s_oSpriteLibrary.getSprite("enlight_dont_come"),d);g.dont_come=a;a=new CEnlight(279,264,s_oSpriteLibrary.getSprite("enlight_come"),d);g.come=a;for(var e=[{value:4,x:365,y:127},{value:5,x:451,y:127},{value:6,x:537,y:127},{value:8,x:623,y:127},{value:9,x:709,y:127},{value:10,x:795,y:127}],h=0;6>h;h++)a=new CEnlight(e[h].x,e[h].y,s_oSpriteLibrary.getSprite("enlight_lay_bet"),d),g["lay_bet"+
e[h].value]=a,a=new CEnlight(e[h].x,e[h].y+30,s_oSpriteLibrary.getSprite("enlight_lose_bet"),d),g["lose_bet"+e[h].value]=a,a=new CEnlight(e[h].x,e[h].y+41,s_oSpriteLibrary.getSprite("enlight_number"),d),g["number"+e[h].value]=a,a=new CEnlight(e[h].x,e[h].y+125,s_oSpriteLibrary.getSprite("enlight_lose_bet"),d),g["win_bet"+e[h].value]=a;a=new CEnlight(226,391,s_oSpriteLibrary.getSprite("enlight_big_6"),d);g.big_6=a;a=new CEnlight(240,434,s_oSpriteLibrary.getSprite("enlight_big_8"),d);g.big_8=a;a=new CEnlight(281,
391,s_oSpriteLibrary.getSprite("enlight_field"),d);g.field=a;e=401;var b=409;for(h=0;7>h;h++)a=new CEnlight(806,e,s_oSpriteLibrary.getSprite("enlight_circle"),d),g["any11_"+h]=a,a=new CEnlight(840,b,s_oSpriteLibrary.getSprite("enlight_circle"),d),g["any_craps_"+h]=a,e+=37,b+=34;a=new CEnlight(877,551,s_oSpriteLibrary.getSprite("enlight_any11"),d);g["any11_"+h]=a;a=new CEnlight(877,612,s_oSpriteLibrary.getSprite("enlight_any_craps"),d);g["any_craps_"+h]=a;a=new CEnlight(877,371,s_oSpriteLibrary.getSprite("enlight_proposition1"),
d);g.hardway6=a;a=new CEnlight(1032,371,s_oSpriteLibrary.getSprite("enlight_proposition1"),d);g.hardway10=a;a=new CEnlight(877,431,s_oSpriteLibrary.getSprite("enlight_proposition1"),d);g.hardway8=a;a=new CEnlight(1032,431,s_oSpriteLibrary.getSprite("enlight_proposition1"),d);g.hardway4=a;a=new CEnlight(877,491,s_oSpriteLibrary.getSprite("enlight_proposition2"),d);g.horn3=a;a=new CEnlight(980,491,s_oSpriteLibrary.getSprite("enlight_proposition2"),d);g.horn2=a;a=new CEnlight(1083,491,s_oSpriteLibrary.getSprite("enlight_proposition2"),
d);g.horn12=a;a=new CEnlight(877,338,s_oSpriteLibrary.getSprite("enlight_seven"),d);g.seven_bet=a};this._initButtonBets=function(){c=[];var a=new CBetTableButton(485,371,s_oSpriteLibrary.getSprite("hit_area_pass_line"),"pass_line",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.pass_line=a;a=new CBetTableButton(580,501,s_oSpriteLibrary.getSprite("hit_area_dont_pass1"),
"dont_pass1",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.dont_pass1=a;a=new CBetTableButton(252,259,s_oSpriteLibrary.getSprite("hit_area_dont_pass2"),"dont_pass2",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,
this));c.dont_pass2=a;a=new CBetTableButton(321,195,s_oSpriteLibrary.getSprite("hit_area_dont_come"),"dont_come",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.dont_come=a;a=new CBetTableButton(536,327,s_oSpriteLibrary.getSprite("hit_area_come"),"come",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,
this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.come=a;a=new CBetTableButton(536,433,s_oSpriteLibrary.getSprite("hit_area_field"),"field",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.field=a;a=new CBetTableButton(304,480,s_oSpriteLibrary.getSprite("hit_area_big_8"),"big_8",d);a.addEventListener(ON_MOUSE_DOWN,
this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.big_8=a;a=new CBetTableButton(274,455,s_oSpriteLibrary.getSprite("hit_area_big_6"),"big_6",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.big_6=a;for(var e=[{value:4,x:408,y:142},{value:5,
x:494,y:142},{value:6,x:580,y:142},{value:8,x:666,y:142},{value:9,x:752,y:142},{value:10,x:838,y:142}],h=0;6>h;h++)a=new CBetTableButton(e[h].x,e[h].y,s_oSpriteLibrary.getSprite("hit_area_lay_bet"),"lay_bet"+e[h].value,d),a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this),!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this)),c["lay_bet"+e[h].value]=a,a=new CBetTableButton(e[h].x,e[h].y+20,s_oSpriteLibrary.getSprite("hit_area_lose_bet"),
"lose_bet"+e[h].value,d),a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this),!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this)),c["lose_bet"+e[h].value]=a,a=new CBetTableButton(e[h].x,e[h].y+69,s_oSpriteLibrary.getSprite("hit_area_number"),"number"+e[h].value,d),a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this),!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,
this._onBetNumberOut,this)),c["number"+e[h].value]=a,a=new CBetTableButton(e[h].x,e[h].y+116,s_oSpriteLibrary.getSprite("hit_area_lose_bet"),"win_bet"+e[h].value,d),a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this),!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this)),c["win_bet"+e[h].value]=a;e=[{x:820,y:299},{x:820,y:337},{x:820,y:374},{x:820,y:410},{x:820,y:447},{x:820,y:484},{x:820,y:521}];h=[{x:855,y:308},
{x:855,y:342},{x:855,y:376},{x:855,y:410},{x:855,y:445},{x:855,y:479},{x:855,y:514}];for(var b=0;7>b;b++)a=new CBetTableButton(e[b].x,e[b].y+116,s_oSpriteLibrary.getSprite("hit_area_circle"),"any11_7",d),a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this),!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this)),c["any11_"+b]=a,a=new CBetTableButton(h[b].x,h[b].y+116,s_oSpriteLibrary.getSprite("hit_area_circle"),"any_craps_7",
d),a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this),!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this)),c["any_craps_"+b]=a;a=new CBetTableButton(1031,355,s_oSpriteLibrary.getSprite("hit_area_seven"),"seven_bet",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));
c.seven_bet=a;a=new CBetTableButton(954,401,s_oSpriteLibrary.getSprite("hit_area_proposition1"),"hardway6",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.hardway6=a;a=new CBetTableButton(1109,401,s_oSpriteLibrary.getSprite("hit_area_proposition1"),"hardway10",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,
this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.hardway10=a;a=new CBetTableButton(954,460,s_oSpriteLibrary.getSprite("hit_area_proposition1"),"hardway8",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.hardway8=a;a=new CBetTableButton(1109,460,s_oSpriteLibrary.getSprite("hit_area_proposition1"),"hardway4",d);
a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.hardway4=a;a=new CBetTableButton(928,521,s_oSpriteLibrary.getSprite("hit_area_proposition2"),"horn3",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.horn3=
a;a=new CBetTableButton(1032,521,s_oSpriteLibrary.getSprite("hit_area_proposition2"),"horn2",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.horn2=a;a=new CBetTableButton(1136,521,s_oSpriteLibrary.getSprite("hit_area_proposition2"),"horn12",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,
this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.horn12=a;a=new CBetTableButton(1032,581,s_oSpriteLibrary.getSprite("hit_area_any11"),"any11_7",d);a.addEventListener(ON_MOUSE_DOWN,this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.any11_7=a;a=new CBetTableButton(1032,628,s_oSpriteLibrary.getSprite("hit_area_any_craps"),"any_craps_7",d);a.addEventListener(ON_MOUSE_DOWN,
this._onBetPress,this);!1===s_bMobile&&(a.addEventListener(ON_MOUSE_OVER,this._onBetNumberOver,this),a.addEventListener(ON_MOUSE_OUT,this._onBetNumberOut,this));c.any_craps_7=a};this.setState=function(a){switch(a){case STATE_GAME_WAITING_FOR_BET:for(var e in c)"come"===e||"dont_come"===e?c[e].setVisible(!1):c[e].setVisible(!0);break;case STATE_GAME_COME_POINT:for(e in c)"pass_line"===e||"dont_pass1"===e||"dont_pass2"===e?c[e].setVisible(!1):c[e].setVisible(!0)}};this.unload=function(){for(var a=0;a<
d.getNumChildren();a++){var e=d.getChildAt(a);e instanceof CBetTableButton&&e.unload()}};this.addEventListener=function(a,e,h){k[a]=e;f[a]=h};this._onBetPress=function(a){null!==a.numbers&&k[ON_SHOW_BET_ON_TABLE]&&k[ON_SHOW_BET_ON_TABLE].call(f[ON_SHOW_BET_ON_TABLE],a,!1)};this._onBetNumberOver=function(a){null!==a.numbers&&k[ON_SHOW_ENLIGHT]&&k[ON_SHOW_ENLIGHT].call(f[ON_SHOW_ENLIGHT],a)};this._onBetNumberOut=function(a){null!==a.numbers&&k[ON_HIDE_ENLIGHT]&&k[ON_HIDE_ENLIGHT].call(f[ON_HIDE_ENLIGHT],
a)};this.enlight=function(a){if(-1!==a.indexOf("any11_"))for(a=0;8>a;a++)g["any11_"+a].show();else if(-1!==a.indexOf("any_craps_"))for(a=0;8>a;a++)g["any_craps_"+a].show();else g[a].show()};this.enlightOff=function(a){if(-1!==a.indexOf("any11_"))for(a=0;8>a;a++)g["any11_"+a].hide();else if(-1!==a.indexOf("any_craps_"))for(a=0;8>a;a++)g["any_craps_"+a].hide();else g[a].hide()};this.getEnlightX=function(a){return g["oEnlight_"+a].getX()};this.getEnlightY=function(a){return g["oEnlight_"+a].getY()};
this.getContainer=function(){return d};this.getX=function(){return d.x};this.getY=function(){return d.x};this._init()}function CEnlight(c,g,d,k){var f;this._init=function(a,e,h,b){f=createBitmap(h);f.x=a;f.y=e;f.visible=!1;b.addChild(f)};this.show=function(){f.visible=!0};this.hide=function(){f.visible=!1};this.getX=function(){return f.x};this.getY=function(){return f.y};this._init(c,g,d,k)}
function CFiche(c,g,d,k,f){var a,e,h,b,t;this._init=function(l,y,v,B,r){t=B;B=s_oSpriteLibrary.getSprite("fiche_"+v);b=createBitmap(B);b.x=l;b.y=y;b.regX=B.width/2;b.regY=B.height/2;r?(b.scaleX=r,b.scaleY=r):(b.scaleX=.6,b.scaleY=.6);a=v;t.addChild(b)};this.setEndPoint=function(l,y){e=new createjs.Point(b.x,b.y);h=new createjs.Point(l,y)};this.updatePos=function(l){var y=new createjs.Point;y=s_oTweenController.tweenVectors(e,h,l,y);b.x=y.x;b.y=y.y};this.getSprite=function(){return b};this.getValue=
function(){return a};this.getStartingPos=function(){return e};this._init(c,g,d,k,f)}
function CDicesAnim(c,g){var d,k,f,a,e,h,b,t,l,y,v,B,r;this._init=function(u,z){f=k=0;v=new createjs.Container;v.visible=!1;v.x=u;v.y=z;s_oStage.addChild(v);var p=(new createjs.Graphics).beginFill("rgba(0,0,0,0.6)").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);r=new createjs.Shape(p);r.x=-u;r.y=-z;v.addChild(r);h=r.on("click",function(){});B=createBitmap(s_oSpriteLibrary.getSprite("dices_screen_bg"));v.addChild(B);e=[];for(p=0;p<NUM_DICE_ROLLING_FRAMES;p++){var D=createBitmap(s_oSpriteLibrary.getSprite("launch_dices_"+
p));D.x=162;D.y=150;D.visible=!1;v.addChild(D);e.push(D)}l=e[0];l.visible=!0;p={images:[s_oSpriteLibrary.getSprite("dice_a")],frames:{width:80,height:34},animations:{anim_1:[0,9,"stop_anim_1"],anim_2:[10,19,"stop_anim_2"],anim_3:[20,29,"stop_anim_3"],anim_4:[30,39,"stop_anim_4"],anim_5:[40,49,"stop_anim_5"],anim_6:[50,59,"stop_anim_6"],stop_anim_1:9,stop_anim_2:19,stop_anim_3:29,stop_anim_4:39,stop_anim_5:49,stop_anim_6:59}};p=new createjs.SpriteSheet(p);b=createSprite(p,"anim_1",80,34);b.stop();
b.visible=!1;b.x=332;b.y=206;v.addChild(b);p={images:[s_oSpriteLibrary.getSprite("dice_b")],frames:{width:102,height:65},animations:{anim_1:[0,14,"stop_anim_1"],anim_2:[15,29,"stop_anim_2"],anim_3:[30,44,"stop_anim_3"],anim_4:[45,59,"stop_anim_4"],anim_5:[60,74,"stop_anim_5"],anim_6:[75,89,"stop_anim_6"],stop_anim_1:14,stop_anim_2:29,stop_anim_3:44,stop_anim_4:59,stop_anim_5:74,stop_anim_6:89}};p=new createjs.SpriteSheet(p);t=createSprite(p,"anim_1",102,65);t.stop();t.visible=!1;t.x=239;t.y=240;v.addChild(t);
t.addEventListener("animationend",E._onDiceBAnimEnded);y=new CDicesTopDownView(584,20,v)};this.unload=function(){r.off("click",h)};this.hide=function(){y.hide();v.visible=!1;b.visible=!1;t.visible=!1;for(var u=0;u<e.length;u++)e[u].visible=!1;s_oGame.dicesAnimEnded()};this.startRolling=function(u){a=u;this.playToFrame(0);d=v.visible=!0;v.visible=!0;playSound("dice_rolling",1,!1)};this.setShowNumberInfo=function(){y.setDiceResult(a[0],a[1])};this.playToFrame=function(u){l.visible=!1;k=u;e[k].visible=
!0;l=e[k]};this.nextFrame=function(){l.visible=!1;k++;e[k].visible=!0;l=e[k]};this._setAnimForDiceResult=function(){e[k].visible=!1;b.visible=!0;t.visible=!0;b.gotoAndPlay("anim_"+a[0]);t.gotoAndPlay("anim_"+a[1])};this._onDiceBAnimEnded=function(u){-1!==u.currentTarget.currentAnimation.indexOf("stop_anim")&&(E.setShowNumberInfo(),setTimeout(function(){E.hide()},TIME_SHOW_DICES_RESULT))};this.isVisible=function(){return v.visible};this.update=function(){!1!==d&&(f++,1===f&&(f=0,k===NUM_DICE_ROLLING_FRAMES-
1?(d=!1,this._setAnimForDiceResult()):this.nextFrame()))};var E=this;this._init(c,g)}
function CGameOver(){var c,g,d;this._init=function(){d=new createjs.Container;s_oStage.addChild(d);var k=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));d.addChild(k);new CTLText(d,CANVAS_WIDTH/2-240,240,480,72,36,"center","#fff",FONT1,1,0,0,TEXT_NO_MONEY,!0,!0,!0,!1);new CTLText(d,CANVAS_WIDTH/2-240,400,480,40,20,"center","#fff",FONT1,1,0,0,TEXT_RECHARGE_MSG,!0,!0,!0,!1);c=new CTextButton(CANVAS_WIDTH/2+170,510,s_oSpriteLibrary.getSprite("but_bg"),TEXT_RECHARGE,FONT1,"#fff",18,"center",s_oStage);
c.addEventListener(ON_MOUSE_UP,this._onRecharge,this);d.addChild(c.getSprite());g=new CTextButton(CANVAS_WIDTH/2-170,510,s_oSpriteLibrary.getSprite("but_bg"),TEXT_EXIT,FONT1,"#fff",18,"center",s_oStage);g.addEventListener(ON_MOUSE_UP,this._onExit,this);d.addChild(g.getSprite());this.hide()};this.unload=function(){c.unload();g.unload()};this.show=function(){d.visible=!0};this.hide=function(){d.visible=!1};this._onRecharge=function(){$(s_oMain).trigger("recharge")};this._onExit=function(){s_oGame.onExit(!0)};
this._init()}
function CCreditsPanel(){var c,g,d,k,f,a,e;this._init=function(){a=new createjs.Container;s_oStage.addChild(a);var h=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));a.addChild(h);h=s_oSpriteLibrary.getSprite("msg_box");g=createBitmap(h);g.x=CANVAS_WIDTH/2;g.y=CANVAS_HEIGHT/2;g.regX=h.width/2;g.regY=h.height/2;a.addChild(g);k=new createjs.Shape;k.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.alpha=.01;e=k.on("click",this._onLogoButRelease);a.addChild(k);h=s_oSpriteLibrary.getSprite("but_exit");
c=CANVAS_WIDTH/2+234;d=new CGfxButton(c,254,h,a);d.addEventListener(ON_MOUSE_UP,this.unload,this);h=s_oSpriteLibrary.getSprite("logo_credits");var b=createBitmap(h);b.regX=h.width/2;b.regY=h.height/2;b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2;a.addChild(b);f=new createjs.Text(TEXT_LINK,"30px Arial","#ffffff");f.x=CANVAS_WIDTH/2;f.y=500;f.textAlign="center";a.addChild(f)};this.unload=function(){k.off("click",e);d.unload();d=null;s_oStage.removeChild(a)};this._onLogoButRelease=function(){window.open("https://www.codethislab.com/",
"_blank")};this._init()}var EASE_LINEAR=0,EASE_CUBIC_IN=1,EASE_QUART_BACKIN=2,EASE_BACKIN=3,EASE_SIN_IN=4,EASE_QUAD_IN=5,EASE_CUBIC_OUT=6,EASE_ELASTIC_OUT=7,EASE_BACKOUT=8,EASE_QUINT_OUT=9,EASE_CUBIC_INOUT=10;
function CRollingTextController(c,g,d,k,f,a,e){var h,b,t,l,y,v,B,r,E,u,z,p=[],D,F;this._init=function(m,x,w,q,G,K,N){u=[];z=[];y=G;this.setUpdateInfo(w,q);r=K;E=N;D=m;F=x};this.unload=function(){clearInterval(B)};this.setUpdateInfo=function(m,x){t=parseFloat(m);l=t+x;h=0;b=Math.round(y/FPS);v=0;var w=this;B=setInterval(function(){w.update()},FPS_TIME)};this.addEventListener=function(m,x,w){u[m]=x;z[m]=w};this.addRollingListener=function(m,x,w){u[ON_CONTROLLER_ROLL]=m;z[ON_CONTROLLER_ROLL]=x;p=[];
for(m=0;m<w.length;m++)p[m]={step:w[m],flag:!1}};this.increaseValue=function(m){v=m};this.getTarget=function(){return D};this.update=function(){h++;if(h>b)h=0,D.text=l.toFixed(2)+E,null!==F&&(F.text=l.toFixed(2)+E),clearInterval(B),null!==u[ON_CONTROLLER_END]&&void 0!==u[ON_CONTROLLER_END]&&u[ON_CONTROLLER_END].call(z[ON_CONTROLLER_END],this),0<v?this.setUpdateInfo(v):null!==u[ON_CONTROLLER_REMOVE]&&void 0!==u[ON_CONTROLLER_REMOVE]&&u[ON_CONTROLLER_REMOVE].call(z[ON_CONTROLLER_REMOVE],this);else{switch(r){case EASE_BACKIN:var m=
s_oTweenController.easeInBack(h,0,1,b);break;case EASE_BACKOUT:m=s_oTweenController.easeOutBack(h,0,1,b);break;case EASE_CUBIC_IN:m=s_oTweenController.easeInCubic(h,0,1,b);break;case EASE_CUBIC_OUT:m=s_oTweenController.easeOutCubic(h,0,1,b);break;case EASE_ELASTIC_OUT:m=s_oTweenController.easeOutElastic(h,0,1,b);break;case EASE_LINEAR:m=s_oTweenController.easeLinear(h,0,1,b);break;case EASE_QUART_BACKIN:m=s_oTweenController.easeBackInQuart(h,0,1,b);break;default:m=s_oTweenController.easeLinear(h,
0,1,b)}m=s_oTweenController.tweenValue(t,l,m);for(var x=0;x<p.length;x++)m>p[x].step&&!p[x].flag&&(p[x].flag=!0,null!==u[ON_CONTROLLER_ROLL]&&u[ON_CONTROLLER_ROLL].call(z[ON_CONTROLLER_ROLL],x));D.text=m.toFixed(2)+E;null!==F&&(F.text=m.toFixed(2)+E)}};this._init(c,g,d,k,f,a,e)}
function CPuck(c,g,d){var k,f;this._init=function(){k=c;var e=s_oSpriteLibrary.getSprite("puck"),h=new createjs.SpriteSheet({images:[e],frames:{width:e.width/2,height:e.height,regX:e.width/2/2,regY:e.height/2},animations:{on:[0],off:[1]}});f=createSprite(h,"off",e.width/2/2,e.height/2,e.width/2,e.height);f.x=c;f.y=g;a.addChild(f)};this.switchOn=function(e){createjs.Tween.get(f).to({x:e},1E3,createjs.Ease.cubicOut).call(function(){f.gotoAndStop("on")})};this.switchOff=function(){createjs.Tween.get(f).to({x:k},
1E3,createjs.Ease.cubicOut).call(function(){f.gotoAndStop("off")})};var a=d;this._init(c,g)}
function CDicesTopDownView(c,g,d){var k,f,a,e;this._init=function(b,t){e=new createjs.Container;e.x=b;e.y=t;e.visible=!1;h.addChild(e);var l=createBitmap(s_oSpriteLibrary.getSprite("dices_box"));e.addChild(l);l=s_oSpriteLibrary.getSprite("dice_topdown1");var y={images:[l],frames:{width:l.width/6,height:l.height,regX:l.width/6/2,regY:l.height/2},animations:{dice_1:[0],dice_2:[1],dice_3:[2],dice_4:[3],dice_5:[4],dice_6:[5]}};y=new createjs.SpriteSheet(y);f=createSprite(y,"dice_1",l.width/6/2,l.height/
2,l.width/6,l.height);f.x=l.width/6/2+10;f.y=l.height/2;e.addChild(f);l=s_oSpriteLibrary.getSprite("dice_topdown2");y={images:[l],frames:{width:l.width/6,height:l.height,regX:l.width/6/2,regY:l.height/2},animations:{dice_1:[0],dice_2:[1],dice_3:[2],dice_4:[3],dice_5:[4],dice_6:[5]}};y=new createjs.SpriteSheet(y);a=createSprite(y,"dice_1",l.width/6/2,l.height/2,l.width/6,l.height);a.x=l.width/6/2+l.width/6+20;a.y=l.height/2;e.addChild(a);k=new CTLText(e,l.width/6-80,l.height+6,190,20,20,"center","#fff",
FONT1,1,0,0,TEXT_COME_OUT,!0,!0,!1,!1)};this.setDiceResult=function(b,t){f.gotoAndStop("dice_"+b);a.gotoAndStop("dice_"+t);k.refreshText(TEXT_COME_OUT+" "+(b+t));e.alpha=0;e.visible=!0;createjs.Tween.get(e).to({alpha:1},400)};this.hide=function(){e.visible=!1};var h=d;this._init(c,g)}
function CAreYouSurePanel(c){var g,d,k,f,a,e;this._init=function(){e=new createjs.Container;e.visible=!1;h.addChild(e);var b=s_oSpriteLibrary.getSprite("msg_box");a=createBitmap(b);a.x=CANVAS_WIDTH/2;a.y=CANVAS_HEIGHT/2;a.regX=.5*b.width;a.regY=.5*b.height;e.addChild(a);g=a.on("click",function(){});d=new CTLText(e,CANVAS_WIDTH/2-240,.5*CANVAS_HEIGHT-100,480,120,60,"center","#fff",FONT1,1,0,0,TEXT_ARE_SURE,!0,!0,!0,!1);k=new CGfxButton(CANVAS_WIDTH/2+186,d.getY()+200,s_oSpriteLibrary.getSprite("but_yes"),
e);k.addEventListener(ON_MOUSE_UP,this._onButYes,this);f=new CGfxButton(CANVAS_WIDTH/2-186,d.getY()+200,s_oSpriteLibrary.getSprite("but_not"),e);f.addEventListener(ON_MOUSE_UP,this._onButNo,this)};this.show=function(){e.visible=!0};this.unload=function(){f.unload();k.unload();a.off("click",g)};this._onButYes=function(){this.unload();playSound("click",1,!1);s_oGame.onConfirmExit()};this._onButNo=function(){playSound("click",1,!1);e.visible=!1};var h=c;this._init()}
function CScoreText(c,g,d){var k;this._init=function(f,a,e){k=new createjs.Text("+"+f," 30px "+FONT1,"#ffffff");k.textAlign="center";k.x=a;k.y=e-10;k.alpha=0;k.shadow=new createjs.Shadow("#000000",2,2,2);s_oStage.addChild(k);createjs.Tween.get(k).to({alpha:1},500,createjs.Ease.quadIn).call(function(){createjs.Tween.get(k).wait(1E3).to({alpha:0},500)});this.moveUp()};this.moveUp=function(){var f=k.y-40,a=this;createjs.Tween.get(k).to({y:f},2E3,createjs.Ease.sineIn).call(function(){a.unload()})};this.unload=
function(){s_oStage.removeChild(k)};this._init(c,g,d)}
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var c=this._iStartingFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(c--,this._oText.font=c+"px "+this._szFont,this._oText.lineHeight=Math.round(c*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>c););this._iFontSize=c}},__verticalAlign:function(){if(this._bVerticalAlign){var c=this._oText.getBounds().height;
this._oText.y-=(c-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(c){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=
new createjs.Text(c,this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);
this.refreshText(c)},setHorizAlign:function(c){this._szAlign=c;this._oText.textAlign=this._szAlign},setVerticalAlign:function(c){this._bVerticalAlign=c},setX:function(c){this._x=c;this._oText.x=c},setY:function(c){this._y=c;this._oText.y=c},setOutline:function(c){null!==this._oText&&(this._oText.outline=c)},setShadow:function(c,g,d,k){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(c,g,d,k))},setColor:function(c){this._oText.color=c},setAlpha:function(c){this._oText.alpha=c},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},
getText:function(){return this._oText},getY:function(){return this._y},getFontSize:function(){return this._iFontSize},getBounds:function(){return this._oText.getBounds()},refreshText:function(c){""===c&&(c=" ");null===this._oText&&this.__createText(c);this._oText.text=c;this._oText.font=this._iStartingFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iStartingFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(c,g,d,k,f,a,e,h,b,t,l,y,v,B,r,E,u){this._oContainer=c;this._x=g;this._y=d;this._iWidth=k;this._iHeight=f;this._bMultiline=E;this._iFontSize=this._iStartingFontSize=a;this._szAlign=e;this._szColor=h;this._szFont=b;this._iPaddingH=l;this._iPaddingV=y;this._bVerticalAlign=r;this._bFitText=B;this._bDebug=u;this._oDebugShape=null;this._fLineHeightFactor=t;this._oText=null;v&&this.__createText(v)};